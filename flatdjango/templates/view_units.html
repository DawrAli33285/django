<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Management</title>
       <!-- Bootstrap CSS -->
       <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/css/bootstrap.min.css" rel="stylesheet">
       <!-- Font Awesome -->
       <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
       
       <style>

.emailmodal {
    overflow-y: auto;
    display: flex;
    margin-top: 5rem;
    align-items: center;
}
/* Update your .mu-filters styles to match the existing single-row layout */

.mu-filters {
    padding: 10px 0;
    background: linear-gradient(to bottom, #f5f5f5 0%, #ffffff 100%);
    position: fixed;
    top: 60px;
    z-index: 5;
    width: 100%;
    border-bottom: solid 1px #ccc;
    box-shadow: 0 0px 3px rgba(0,0,0,0.3);
}

.mu-filters .form-inline {
    display: flex;
    flex-wrap: nowrap;
    overflow-x: auto;
    overflow-y: hidden;
    gap: 2px;
    padding: 0 15px;
    align-items: center;
}

.mu-filters .form-group {
    display: flex;
    gap: 5px;
    align-items: center;
    flex-wrap: nowrap;
    margin: 0;
}

.mu-filters .form-control {
    padding: 6px 10px;
    font-size: 12px;
    border: 1px solid #ddd;
    border-radius: 3px;
    height: 32px;
    white-space: nowrap;
    flex-shrink: 0;
}

.mu-filters .btn {
    padding: 6px 10px;
    font-size: 12px;
    height: 32px;
    white-space: nowrap;
    flex-shrink: 0;
}

.mu-filters #FilterSearch {
    width: 180px;
    min-width: 180px;
}

.mu-filters .m-1 {
    margin: 0 2px !important;
}

/* Scrollbar styling for filter overflow */
.mu-filters .form-inline::-webkit-scrollbar {
    height: 3px;
}

.mu-filters .form-inline::-webkit-scrollbar-track {
    background: #f1f1f1;
}

.mu-filters .form-inline::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 3px;
}

.mu-filters .form-inline::-webkit-scrollbar-thumb:hover {
    background: #555;
}
.emailmodal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            overflow: auto;
        }

        .emailmodal.emailmodal-show {
            display: block !important;
        }

        .emailmodal-dialog {
            position: relative;
            width: auto;
            max-width: 850px;
            margin: 30px auto;
        }

        .emailmodal-content {
            position: relative;
            background-color: #fff;
            border-radius: 4px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .emailmodal-header {
            padding: 15px;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .emailmodal-title {
            margin: 0;
            font-size: 18px;
            font-weight: 500;
        }

        .emailmodal-close {
            background: transparent;
            border: none;
            font-size: 28px;
            font-weight: 300;
            line-height: 1;
            color: #000;
            cursor: pointer;
            opacity: 0.5;
        }

        .emailmodal-close:hover {
            opacity: 1;
        }

        .emailmodal-body {
            padding: 15px;
            max-height: 70vh;
            overflow-y: auto;
        }

        .emailmodal-unit-table {
            width: 100%;
            max-width: 800px;
            border-collapse: collapse;
            border: 1px solid #eeeeee;
        }

        .filter-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .form-control, .btn {
            margin: 5px;
        }
        .search-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }
        .selected-filters {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        .filter-badge {
            display: inline-block;
            margin: 5px;
            padding: 5px 10px;
            background: #007bff;
            color: white;
            border-radius: 15px;
            font-size: 14px;
        }
        .filter-badge .remove {
            cursor: pointer;
            margin-left: 8px;
            font-weight: bold;
        }
        .emailmodal-unit-table td {
            padding: 10px;
            border: 1px solid #eeeeee;
        }

        .emailmodal-unit-table img {
            width: 100%;
            display: block;
        }

        .emailmodal-unit-table a {
            display: block;
        }

        .emailmodal-unit-table hr {
            border: none;
            border-top: 1px solid #dee2e6;
            margin: 10px 0;
        }

        .emailmodal-footer {
            padding: 15px;
            border-top: 1px solid #dee2e6;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: 1px solid transparent;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: #007bff;
            color: #fff;
            border-color: #007bff;
        }

        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }

        .demo-button {
            padding: 10px 20px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
        }

        .demo-button:hover {
            background-color: #218838;
        }

        .unit-table strong {
            font-weight: 600;
        }

        .unit-table span {
            color: #28a745;
        }

        .unit-table small {
            color: #999;
        }



        .open-modal-btn {
            background-color: #007bff;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }

        .open-modal-btn:hover {
            background-color: #0056b3;
        }

        /* Modal Overlay */
        .secondeditmodal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .secondeditmodal-overlay.show {
            display: flex;
        }

        .secondeditmodal-container {
            background-color: white;
            width: 90%;
            max-width: 1200px;
            max-height: 90vh;
            overflow-y: auto;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .secondeditmodal-content {
            background-color: white;
        }

        .secondeditmodal-header {
            background-color: #f0f0f0;
            padding: 15px 20px;
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .secondeditmodal-title {
            font-size: 18px;
            font-weight: bold;
        }

        .secondeditmodal-close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .secondeditmodal-close-btn:hover {
            color: #000;
        }

        /* Form Styles */
        .secondeditmodal-form {
            width: 100%;
        }

        .secondeditmodal-formee {
            width: 100%;
        }

        .secondeditmodal-formee-mini {
            font-size: 14px;
        }

        /* Validation Error */
        .secondeditmodal-validation-error {
            border: 1px solid red;
            padding: 10px;
            margin: 15px 20px;
            color: red;
            display: none;
        }

        /* Tabs */
        .secondeditmodal-tabs {
            position: relative;
        }

        .secondeditmodal-tabs-nav {
            display: flex;
            border-bottom: 2px solid #ddd;
            background-color: #f9f9f9;
            padding: 0;
            margin: 0;
            list-style: none;
        }

        .secondeditmodal-tabs-tab {
            list-style: none;
            float: left;
            position: relative;
            padding: 0;
            border: 1px solid transparent;
            margin: 0 2px -1px 0;
            border-top-left-radius: 4px;
            border-top-right-radius: 4px;
            background: #f6f6f6;
            border: 1px solid #c5c5c5;
        }

        .secondeditmodal-tabs-tab.active {
            background: white;
            border-bottom-color: white;
            font-weight: bold;
            border: 1px solid #ddd;
            border-bottom: 1px solid white;
        }

        .secondeditmodal-tabs-anchor {
            display: block;
            padding: 12px 24px;
            text-decoration: none;
            color: #333;
            cursor: pointer;
        }

        .secondeditmodal-tabs-panel {
            padding: 20px;
            display: none;
        }

        .secondeditmodal-tabs-panel.active {
            display: block;
        }

        /* Table Styles */
        .secondeditmodal-info-table {
            width: 100%;
            margin-bottom: 20px;
        }

        .secondeditmodal-info-table td {
            padding: 8px;
            vertical-align: top;
        }

        .secondeditmodal-boldy {
            font-weight: bold;
            width: 120px;
        }

        .secondeditmodal-boxer {
            width: 110px;
        }

        /* Items Table */
        .secondeditmodal-iqtable {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .secondeditmodal-iqtable thead {
            background-color: #f0f0f0;
        }

        .secondeditmodal-iqtable th,
        .secondeditmodal-iqtable td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
        }

        .secondeditmodal-iqtable tbody tr:nth-child(even) {
            background-color: #EBE9E9;
        }

        .secondeditmodal-iqtable input[type="text"] {
            width: 100%;
            padding: 4px;
            border: 1px solid #ccc;
        }

        .secondeditmodal-iqtable select {
            width: 100%;
            padding: 4px;
            border: 1px solid #ccc;
        }

        .secondeditmodal-deletelink {
            color: #dc3545;
            text-decoration: none;
            cursor: pointer;
        }

        .secondeditmodal-deletelink:hover {
            text-decoration: underline;
        }

        .secondeditmodal-mover {
            cursor: move;
            user-select: none;
        }

        .secondeditmodal-sortable {
            position: relative;
        }

        .secondeditmodal-sortable-handle {
            cursor: move;
        }

        /* Form Controls */
        .secondeditmodal-form-group {
            margin-bottom: 15px;
        }

        .secondeditmodal-form-group label {
            display: inline-block;
            margin-right: 10px;
            font-weight: normal;
        }

        .secondeditmodal-form-group input[type="text"],
        .secondeditmodal-form-group input[type="number"],
        .secondeditmodal-form-group select {
            padding: 6px 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }

        .secondeditmodal-form-group input[type="checkbox"] {
            margin-right: 5px;
        }

        .secondeditmodal-submit-btn {
            background-color: #007bff;
            color: white;
            padding: 10px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }

        .secondeditmodal-submit-btn:hover {
            background-color: #0056b3;
        }

        .secondeditmodal-hr {
            margin: 20px 0;
            border: none;
            border-top: 1px solid #ddd;
        }

        /* Linked Units Table */
        .secondeditmodal-linked-units-table {
            width: 100%;
            border-collapse: collapse;
        }

        .secondeditmodal-linked-units-table td {
            padding: 8px;
            border-bottom: 1px solid #ddd;
        }

        .secondeditmodal-linked-units-table img {
            width: 70px;
            height: 49px;
            object-fit: cover;
        }

        /* Image Preview */
        .secondeditmodal-image-preview {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .secondeditmodal-image-preview a {
            display: block;
        }

        .secondeditmodal-image-preview img {
            max-width: 200px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .secondeditmodal-tdmoney {
            text-align: right;
        }

        .secondeditmodal-iqdate {
            padding: 6px 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .secondeditmodal-hasdatepicker {
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAdgAAAHYBTnsmCAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAABkSURBVCiRY2AYBaNgFAwEMDIwMPxn+M/wnwECGBgYGP4z/mf8z8DAwMDAwMDIyMjAwMDAwMDIyMjAwMDAwPCfgYGB4T8DAwMDAwMDw38GBgYGBgYGhv8M/xkYGBgYGBj+MzAwDDQAAJZMAwwsX1xlAAAAAElFTkSuQmCC');
            background-repeat: no-repeat;
            background-position: right 5px center;
            padding-right: 25px;
        }
        
     .neweditmodal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1050;
        }

        .neweditmodal-overlayactive {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1050;
        }

        .neweditmodal-container {
            background: white;
            border-radius: 8px;
            width: 90%;
            max-width: 1400px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .neweditmodal-header {
            background: #6c757d;
            color: white;
            padding: 20px;
            border-radius: 8px 8px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            position: relative;
        }

        .neweditmodal-header-content {
            display: flex;
            gap: 20px;
            width: 100%;
        }

        .neweditmodal-header-text {
            flex: 1;
        }

        .neweditmodal-header h4 {
            font-size: 20px;
            font-weight: 600;
            margin: 0;
        }

        .neweditmodal-header-image {
            width: 200px;
            height: 150px;
            background: #dee2e6;
            border-radius: 4px;
        }

        .neweditmodal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: #dc3545;
            font-size: 32px;
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        .neweditmodal-close:hover {
            opacity: 0.8;
        }

        .neweditmodal-tabs {
            display: flex;
            border-bottom: 2px solid #dee2e6;
            background: #f8f9fa;
            overflow-x: auto;
        }

        .neweditmodal-tab {
            padding: 12px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            color: #495057;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
            transition: all 0.3s;
        }

        .neweditmodal-tab:hover {
            background: #e9ecef;
        }

        .neweditmodal-tab.neweditmodal-active {
            color: #007bff;
            border-bottom-color: #007bff;
            background: white;
        }

        .neweditmodal-body {
            padding: 20px;
            overflow-y: auto;
            flex: 1;
            max-height: calc(90vh - 250px);
        }

        .neweditmodal-tab-content {
            display: none;
        }

        .neweditmodal-tab-content.neweditmodal-active {
            display: block;
        }

        .neweditmodal-section {
            margin-bottom: 30px;
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 20px;
        }

        .neweditmodal-section:last-child {
            border-bottom: none;
        }

        .neweditmodal-section-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #000;
        }

        .neweditmodal-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px 20px;
            margin-bottom: 10px;
        }

        .neweditmodal-field {
            display: grid;
            grid-template-columns: 120px 1fr;
            align-items: center;
            gap: 10px;
        }

        .neweditmodal-label {
            font-size: 14px;
            color: #495057;
            font-weight: 500;
        }

        .neweditmodal-value {
            padding: 8px 12px;
            background: #e9ecef;
            border-radius: 4px;
            font-size: 14px;
            color: #212529;
            border: 1px solid #ced4da;
        }

        .neweditmodal-input,
        .neweditmodal-select {
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
            width: 100%;
        }

        .neweditmodal-checkbox-row {
            display: flex;
            gap: 30px;
            align-items: center;
            padding: 10px 0;
        }

        .neweditmodal-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .neweditmodal-checkbox input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .neweditmodal-items-section {
            margin-top: 20px;
        }

        .neweditmodal-items-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-top: 1px solid #000;
            padding-top: 10px;
        }

        .neweditmodal-items-header {
            display: flex;
            gap: 10px;
            font-weight: 600;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .neweditmodal-items-header > div {
            text-align: center;
        }

        .neweditmodal-items-header > div:nth-child(1) { width: 50px; }
        .neweditmodal-items-header > div:nth-child(2) { flex: 2; }
        .neweditmodal-items-header > div:nth-child(3) { flex: 1; }
        .neweditmodal-items-header > div:nth-child(4) { flex: 1; }
        .neweditmodal-items-header > div:nth-child(5) { flex: 1.5; }
        .neweditmodal-items-header > div:nth-child(6) { flex: 1.5; }
        .neweditmodal-items-header > div:nth-child(7) { flex: 1.5; }
        .neweditmodal-items-header > div:nth-child(8) { width: 50px; }

        .neweditmodal-item-form {
            display: flex;
            gap: 10px;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
        }

        .neweditmodal-item-form > div:nth-child(1) { width: 50px; }
        .neweditmodal-item-form > div:nth-child(2) { flex: 2; }
        .neweditmodal-item-form > div:nth-child(3) { flex: 1; }
        .neweditmodal-item-form > div:nth-child(4) { flex: 1; }
        .neweditmodal-item-form > div:nth-child(5) { flex: 1.5; }
        .neweditmodal-item-form > div:nth-child(6) { flex: 1.5; }
        .neweditmodal-item-form > div:nth-child(7) { flex: 1.5; }
        .neweditmodal-item-form > div:nth-child(8) { width: 50px; }

        .neweditmodal-item-form input,
        .neweditmodal-item-form select {
            width: 100%;
            padding: 6px 10px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 13px;
        }

        .neweditmodal-add-btn {
            background: none;
            border: none;
            color: #28a745;
            font-size: 20px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .neweditmodal-add-btn:hover {
            opacity: 0.7;
        }

        .neweditmodal-footer {
            padding: 15px 20px;
            border-top: 1px solid #dee2e6;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .neweditmodal-btn {
            padding: 10px 24px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .neweditmodal-btn-success {
            background: #28a745;
            color: white;
        }

        .neweditmodal-btn-success:hover {
            background: #218838;
        }

        .neweditmodal-btn-danger {
            background: #dc3545;
            color: white;
            margin-left: 8px;
        }

        .neweditmodal-btn-danger:hover {
            background: #c82333;
        }

        .neweditmodal-link {
            color: #007bff;
            text-decoration: none;
            padding: 8px 12px;
            display: inline-block;
        }

        .neweditmodal-link:hover {
            text-decoration: underline;
        }

        .neweditmodal-video-header {
            display: flex;
            gap: 10px;
            font-weight: 600;
            padding: 10px;
            margin-top: 15px;
        }

        .neweditmodal-video-header > div:nth-child(1) { flex: 4; text-align: center; }
        .neweditmodal-video-header > div:nth-child(2) { flex: 2; text-align: center; }

        .neweditmodal-video-form {
            display: flex;
            gap: 10px;
            align-items: center;
            padding: 15px;
        }

        .neweditmodal-video-form > div:nth-child(1) { flex: 4; }
        .neweditmodal-video-form > div:nth-child(2) { flex: 2; }
        .neweditmodal-video-form > div:nth-child(3) { width: 50px; }

        .neweditmodal-video-form input,
        .neweditmodal-video-form select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
            height: 38px;
        }

        .neweditmodal-editor {
            min-height: 300px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            padding: 12px;
            background: white;
            width: 100%;
        }

        .neweditmodal-commission-section {
            padding: 20px 0;
        }

        .neweditmodal-commission-field {
            margin-bottom: 15px;
        }

        .neweditmodal-commission-inputs {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .neweditmodal-commission-inputs > div {
            flex: 1;
        }

        .neweditmodal-gray-bg {
            background-color: gray;
        }

        .neweditmodal-disabled-bg {
            background-color: #e9ecef;
        }

        .neweditmodal-text-red {
            color: red;
        }

        .neweditmodal-empty-state {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }

        @media (max-width: 768px) {
            .neweditmodal-row {
                grid-template-columns: 1fr;
            }
            
            .neweditmodal-header-content {
                flex-direction: column;
            }
        }

   
           /* Navbar Styles */
           .navbar {
               background-color: #2c3e50 !important;
           }
   
           .navbar-brand {
               color: white !important;
               font-size: 24px;
               font-weight: bold;
           }
   
         
           .navbar-dark .navbar-nav .nav-link {
               color: rgba(255, 255, 255, 0.9);
               padding: 0.5rem 1rem;
           }
   
           .navbar-dark .navbar-nav .nav-link:hover {
               color: #fff;
               background-color: rgba(255, 255, 255, 0.1);
               border-radius: 4px;
           }
   
           .dropdown-menu {
               border-radius: 0.25rem;
               box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
           }
   
           .dropdown-item {
               padding: 0.5rem 1.5rem;
           }
   
           .dropdown-item:hover {
               background-color: #f8f9fa;
           }
   
           .navbar-text {
               color: rgba(255, 255, 255, 0.9);
           }
   
           .navbar-text .btn {
               margin-left: 0.5rem;
           }
   
       
       </style>
   <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: #f5f5f5;
            padding: 20px;
            font-size: 13px;
        }

        .container {
            max-width: 100%;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        h2 {
            margin-bottom: 20px;
            color: #333;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .controls input, .controls select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 13px;
        }

        .controls input[type="text"] {
            min-width: 200px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            transition: background 0.2s;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
        }

        .table-wrapper {
            overflow-x: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            min-width: 1800px;
        }

        thead {
            background: #f8f9fa;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        th {
            padding: 12px 8px;
            text-align: left;
            font-weight: 600;
            font-size: 11px;
            border-bottom: 2px solid #dee2e6;
            white-space: nowrap;
            cursor: pointer;
            user-select: none;
            position: relative;
        }

        th:hover {
            background: #e9ecef;
        }

        th.sortable::after {
            content: '⇅';
            margin-left: 5px;
            opacity: 0.3;
        }

        th.sort-asc::after {
            content: '↑';
            opacity: 1;
        }

        th.sort-desc::after {
            content: '↓';
            opacity: 1;
        }

        td {
            padding: 10px 8px;
            border-bottom: 1px solid #f0f0f0;
            vertical-align: middle;
        }

        tr:hover {
            background: #f8f9fa;
        }

        tr.odd {
            background: #fff;
        }

        tr.even {
            background: #fafafa;
        }

        .checkbox-cell {
            width: 30px;
            text-align: center;
        }

        input[type="checkbox"] {
            cursor: pointer;
            width: 16px;
            height: 16px;
        }

        .img-cell {
            width: 100px;
            text-align: center;
        }

        .img-cell img {
            width: 80px;
            height: 56px;
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
        }

        .mfg-cell {
            width: 40px;
            text-align: center;
        }

        .mfg-cell img {
            width: 28px;
            height: 24px;
        }

        .model-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .mu-icons {
            display: flex;
            gap: 3px;
            margin-top: 4px;
            flex-wrap: wrap;
        }

        .mu-icons img {
            width: 16px;
            height: 16px;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 500;
            text-align: center;
            min-width: 70px;
        }

        .badge-light {
            background: #f8f9fa;
            color: #495057;
            border: 1px solid #e0e0e0;
        }

        .badge-warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffc107;
        }

        .badge-secondary {
            background: #6c757d;
            color: white;
        }

        .badge-dark {
            background: #343a40;
            color: white;
        }

        .btn-sm {
            padding: 4px 8px;
            font-size: 11px;
            text-decoration: none;
            display: inline-block;
            border-radius: 3px;
        }

        .btn-dark {
            background: #343a40;
            color: white;
        }

        .btn-info {
            background: #17a2b8;
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
            border: 1px solid #6c757d;
        }

        .btn-outline-success {
            background: white;
            color: #28a745;
            border: 1px solid #28a745;
        }

        .btn-outline-danger {
            background: white;
            color: #dc3545;
            border: 1px solid #dc3545;
        }

        .btn-block {
            display: block;
            width: 100%;
            text-align: center;
        }

        .btn-group {
            display: flex;
            gap: 2px;
            margin-bottom: 8px;
        }

        .btn-group .btn-sm {
            flex: 1;
            text-align: center;
        }

        .mu-alerts {
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-top: 8px;
        }

        .truncate {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 120px;
        }

        .stats {
            display: flex;
            gap: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
            margin-top: 20px;
        }

        .stat-item {
            flex: 1;
        }

        .stat-label {
            font-size: 11px;
            color: #6c757d;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }

        .info-icon {
            font-size: 10px;
            color: #6c757d;
            margin-left: 3px;
        }

        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .controls input, .controls select {
                width: 100%;
            }
        }
    </style>
</head>
<body>

    <div id="couponBulkModal" class="modal" tabindex="-1" role="dialog" style="display: none;">
        <div class="modal-dialog" role="document" style="max-width: 550px;">
            <div class="modal-content">
                <div class="modal-header border-bottom">
                    <h5 class="modal-title">Bulk Update - Coupon</h5>
                    <button type="button" class="close" onclick="closeCouponBulkModal()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                
                <div class="modal-body p-4">
                    <form id="couponBulkForm">
                        <input id="couponUnitIds" name="UnitIds" type="hidden" value="">
                        
                        <div class="form-group mb-4">
                            <label for="couponMfgDisplay" class="font-weight-bold mb-3 d-block">Manufacturer:</label>
                            <div class="alert alert-info" id="couponMfgDisplay">CAN-AM</div>
                        </div>
    
                        <div class="form-group mb-4">
                            <label for="couponSelect" class="font-weight-bold mb-3 d-block">Select Coupon:</label>
                            <select class="form-control form-control-lg" id="couponSelect" name="CouponIdSel">
                                <option value="-">-</option>
                                <option value="-2">Remove Coupons</option>
                                <option value="3">15% off P & A Vehicle Purchase</option>
                                <option value="5">Free Helmet</option>
                                <option value="6">Gift Card</option>
                                <option value="7">Free Battery Tender</option>
                            </select>
                        </div>
                    </form>
                </div>
                
                <div class="modal-footer border-top bg-light">
                    <button type="button" class="btn btn-outline-secondary" onclick="closeCouponBulkModal()">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="submitCouponBulk()">Apply</button>
                </div>
            </div>
        </div>
    </div>


    <div id="commissionBulkModal" class="modal" tabindex="-1" role="dialog" style="display: none;">
        <div class="modal-dialog" role="document" style="max-width: 550px;">
            <div class="modal-content">
                <div class="modal-header border-bottom">
                    <h5 class="modal-title">Bulk Update - Commission</h5>
                    <button type="button" class="close" onclick="closeCommissionBulkModal()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                
                <div class="modal-body p-4">
                    <form id="commissionBulkForm">
                        <input id="commissionUnitIds" name="UnitIds" type="hidden" value="">
                        
                        <div class="form-group mb-4">
                            <label for="commissionProgramSelect" class="font-weight-bold mb-3 d-block">Select Commission Program:</label>
                            <select class="form-control form-control-lg" id="commissionProgramSelect" name="CommProgramId">
                                <option value="-1">-</option>
                                <option value="1">Default New</option>
                                <option value="2">Default Used - &lt; $8,999</option>
                                <option value="15">Default Used - &gt; $8,999</option>
                                <option value="40">TaoTao Scooter</option>
                                <option value="48">Yellow Tag</option>
                            </select>
                        </div>
    
                        <div class="form-group">
                            <label class="font-weight-bold mb-3 d-block">Specific Commission (Optional):</label>
                            <div class="form-row">
                                <div class="col-md-6">
                                    <label for="commissionDesc" class="small">Description</label>
                                    <input type="text" class="form-control" id="commissionDesc" name="CommDesc" placeholder="e.g., Special Bonus">
                                </div>
                                <div class="col-md-6">
                                    <label for="commissionAmount" class="small">Amount</label>
                                    <input type="number" class="form-control" id="commissionAmount" name="CommAmount" step="0.01" placeholder="0.00">
                                </div>
                            </div>
                            <small class="form-text text-muted mt-2">Leave blank to use program defaults</small>
                        </div>
                    </form>
                </div>
                
                <div class="modal-footer border-top bg-light">
                    <button type="button" class="btn btn-outline-secondary" onclick="closeCommissionBulkModal()">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="submitCommissionBulk()">Apply</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Quote Level Bulk Edit Modal -->
    <div id="quoteLevelModal" class="modal" tabindex="-1" role="dialog" style="display: none;">
        <div class="modal-dialog" role="document" style="max-width: 550px;">
            <div class="modal-content">
                <div class="modal-header border-bottom">
                    <h5 class="modal-title">Bulk Update - Quote Level</h5>
                    <button type="button" class="close" onclick="closeQuoteLevelModal()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                
                <div class="modal-body p-4">
                    <form id="quoteLevelBulkForm">
                        <input id="quoteLevelUnitIds" name="UnitIds" type="hidden" value="">
                        
                        <!-- Selection Section -->
                        <div class="form-group mb-4">
                            <label for="quoteLevelSelect" class="font-weight-bold mb-3 d-block">Select Quote Level:</label>
                            <select class="form-control form-control-lg" id="quoteLevelSelect" name="QuoteLevel">
                                <option value="0">Level 0 - ARI Price</option>
                                <option value="1">Level 1 - MSRP and Fees</option>
                                <option value="2" selected>Level 2 - Price with Rebates Only</option>
                                <option value="3">Level 3 - Price with Rebates and Discounts</option>
                                <option value="4">Level 4 - Price with Discounts Only</option>
                            </select>
                        </div>
    
                        <!-- Reference Guide -->
                        <div class="alert alert-light border p-3">
                            <small class="text-muted d-block mb-3">
                                <strong>Quick Reference:</strong>
                            </small>
                            <div style="font-size: 13px;">
                                <div class="d-flex justify-content-between mb-2">
                                    <span><strong>Level 0:</strong></span>
                                    <span class="text-muted">ARI Price on website</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span><strong>Level 1:</strong></span>
                                    <span class="text-muted">MSRP and Fees</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span><strong>Level 2:</strong></span>
                                    <span class="text-muted">Price with Rebates Only</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span><strong>Level 3:</strong></span>
                                    <span class="text-muted">Price with Rebates and Discounts</span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span><strong>Level 4:</strong></span>
                                    <span class="text-muted">Price with Discounts Only</span>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                
                <div class="modal-footer border-top bg-light">
                    <button type="button" class="btn btn-outline-secondary" onclick="closeQuoteLevelModal()">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="submitQuoteLevelBulk()">Apply Changes</button>
                </div>
            </div>
        </div>
    </div>
    
    <style>
        .form-control-lg {
            padding: 0.75rem 1rem;
            font-size: 1rem;
        }
        
        .alert {
            background-color: #f8f9fa;
            border-radius: 0.25rem;
        }
    </style>


    <!-- Auto RV Bulk Edit Modal -->
     <!-- Yellow Tag Bulk Edit Modal -->
<div id="yellowTagModal" class="modal" tabindex="-1" role="dialog" style="display: none;">
    <div class="modal-dialog" role="document" style="max-width: 500px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Bulk Update</h5>
                <button type="button" class="close" onclick="closeYellowTagModal()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h2>MUBulkYellowTag</h2>
                <form id="yellowTagBulkForm">
                    <input id="yellowTagUnitIds" name="UnitIds" type="hidden" value="">
                    
                    <div class="form-group">
                        <label>Yellow Tag</label>
                        <div>
                            <input type="checkbox" id="yellowTagCheckbox" name="YellowTag" value="true" checked>
                            <input name="YellowTag" type="hidden" value="false">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeYellowTagModal()">Close</button>
                <button type="button" class="btn btn-primary" onclick="submitYellowTagBulk()">Apply</button>
            </div>
        </div>
    </div>
</div>


<div id="autoRVModal" class="modal" tabindex="-1" role="dialog" style="display: none;">
    <div class="modal-dialog" role="document" style="max-width: 500px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Bulk Update - Auto RV</h5>
                <button type="button" class="close" onclick="closeAutoRVModal()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h2>MUBulk Auto RV</h2>
                <form id="autoRVBulkForm">
                    <input id="autoRVUnitIds" name="UnitIds" type="hidden" value="">
                    
                    <div class="form-group">
                        <label>Auto RV Advertisement</label>
                        <div>
                            <input type="checkbox" id="autoRVCheckbox" name="AutoRV" value="true" checked>
                            <input name="AutoRV" type="hidden" value="false">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeAutoRVModal()">Close</button>
                <button type="button" class="btn btn-primary" onclick="submitAutoRVBulk()">Apply</button>
            </div>
        </div>
    </div>
</div>

<!-- Sale Program Bulk Edit Modal -->
<div id="saleProgramModal" class="modal" tabindex="-1" role="dialog" style="display: none;">
    <div class="modal-dialog" role="document" style="max-width: 600px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Sale Program Select</h5>
                <button type="button" class="close" onclick="closeSaleProgramModal()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="max-height: 500px; overflow-y: auto;">
                <p><strong>Mfgs Selected:</strong></p>
                <p id="spMfgList">CAN-AM</p>
                <p><strong>Unit Count:</strong> <span id="spUnitCount">0</span></p>
                
                <form id="saleProgramBulkForm">
                    <input id="spUnitIds" name="UnitIds" type="hidden" value="">
                    <input id="spSaleProgramId" name="SaleProgramId" type="hidden" value="">
                    
                    <table class="table table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>Sale Program Name</th>
                                <th>Mfg</th>
                                <th>New/Used</th>
                            </tr>
                        </thead>
                        <tbody id="spProgramTableBody">
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="858" href="#" title="MY25 Maverick X3 Turbo (2 Seat)">MY25 Maverick X3 Turbo (2 Seat)</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="931" href="#" title="MY23 Spyder F3 Limited">MY23 Spyder F3 Limited</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1030" href="#" title="MY24 Ryker 600">MY24 Ryker 600</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1039" href="#" title="MY25 Commander 700 XT">MY25 Commander 700 XT</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1040" href="#" title="MY24 Maverick X3 (2 Seat)">MY24 Maverick X3 (2 Seat)</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1106" href="#" title="MY24 Spyder F3 LIMITED">MY24 Spyder F3 LIMITED</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1109" href="#" title="MY24 Defender HD9">MY24 Defender HD9</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1110" href="#" title="MY25 Defender HD7">MY25 Defender HD7</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1149" href="#" title="MY24 Outlander 850">MY24 Outlander 850</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1156" href="#" title="MY23 Spyder RT Sea To Sky">MY23 Spyder RT Sea To Sky</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1165" href="#" title="MY25 Renegade 70/110">MY25 Renegade 70/110</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1167" href="#" title="MY25 Outlander 500/700">MY25 Outlander 500/700</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1171" href="#" title="MY25 Maverick X3 (MAX)">MY25 Maverick X3 (MAX)</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1174" href="#" title="MY25 Defender HD10 Limited">MY25 Defender HD10 Limited</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1175" href="#" title="MY25 Defender HD9">MY25 Defender HD9</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1176" href="#" title="MY25 Maverick Sport (2 Seat)">MY25 Maverick Sport (2 Seat)</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1179" href="#" title="MY25 Defender HD10">MY25 Defender HD10</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1185" href="#" title="MY25 Outlander 850/1000">MY25 Outlander 850/1000</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1190" href="#" title="MY25 Spyder RT">MY25 Spyder RT</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1191" href="#" title="MY25 Spyder Canyon">MY25 Spyder Canyon</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1192" href="#" title="MY25 Spyder F3">MY25 Spyder F3</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1193" href="#" title="MY25 Ryker Rally">MY25 Ryker Rally</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1194" href="#" title="MY25 Ryker 900 Sport">MY25 Ryker 900 Sport</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1196" href="#" title="MY25 Ryker 600">MY25 Ryker 600</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1237" href="#" title="MY24 Spyder F3 S">MY24 Spyder F3 S</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1239" href="#" title="MY24 Spyder RT Limited">MY24 Spyder RT Limited</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1241" href="#" title="MY24 Spyder RT Base">MY24 Spyder RT Base</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1301" href="#" title="MY25 Defender HD10 Limited Max">MY25 Defender HD10 Limited Max</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1305" href="#" title="MY23 Spyder F3 Limited - Blue Satin Only">MY23 Spyder F3 Limited - Blue Satin Only</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1309" href="#" title="MY25 Maverick X3 Turbo RR (2 Seat)">MY25 Maverick X3 Turbo RR (2 Seat)</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1319" href="#" title="MY24 Maverick X3 Xrc 64&quot;">MY24 Maverick X3 Xrc 64"</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1347" href="#" title="MY25 Defender HD9 CAB">MY25 Defender HD9 CAB</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1359" href="#" title="MY26 Defender HD11 Cab">MY26 Defender HD11 Cab</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1365" href="#" title="MY26 Defender HD11">MY26 Defender HD11</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1366" href="#" title="MY26 Spyder RT">MY26 Spyder RT</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1367" href="#" title="MY26 Spyder F3">MY26 Spyder F3</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1368" href="#" title="MY26 Spyder Canyon">MY26 Spyder Canyon</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1369" href="#" title="MY26 Ryker Rally">MY26 Ryker Rally</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1370" href="#" title="MY26 Ryker 900 Sport">MY26 Ryker 900 Sport</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1371" href="#" title="MY26 Ryker 600">MY26 Ryker 600</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1372" href="#" title="MY26 Renegade 70/110">MY26 Renegade 70/110</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                            <tr>
                                <td><a class="sp-clicky" data-saleprogramid="1373" href="#" title="MY26 Outlander 850/1000">MY26 Outlander 850/1000</a></td>
                                <td>CAN-AM</td>
                                <td>New</td>
                            </tr>
                        </tbody>
                    </table>
                </form>
            </div>
        </div>
    </div>
</div>
    <!-- Email Modal -->
     <!-- MAP Bulk Edit Modal -->
<div id="mapBulkModal" class="modal" tabindex="-1" role="dialog" style="display: none;">
    <div class="modal-dialog" role="document" style="max-width: 500px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Bulk Update - MAP</h5>
                <button type="button" class="close" onclick="closeMapBulkModal()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="mapBulkForm">
                    <input id="mapUnitIds" name="UnitIds" type="hidden" value="">
                    
                    <div class="form-group">
                        <label for="mapMapped">Mapped</label>
                        <div>
                            <input type="checkbox" id="mapMapped" name="Maped" value="true" checked>
                            <input name="Maped" type="hidden" value="false">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeMapBulkModal()">Close</button>
                <button type="button" class="btn btn-primary" onclick="submitMapBulk()">Apply</button>
            </div>
        </div>
    </div>
</div>


   
    <div id="bulkEditSection" class="jumbotron" style="display: none;">
        <div class="container-fluid form-inline">
            <div class="form-inline">
                <select name="ddlBulkAction" class="form-control" id="ddlBulkAction">
                    <option value="Bulk">Bulk</option>
                    <option value="MAP">MAP</option>
                    <option value="SP">Sales Program</option>
                    <option value="AutoRV">RV</option>
                    <option value="VecTag">Hang Tags</option>
                    <option value="YellowTag">Yellow Tag</option>
                    <option value="QuoteLevel">Quote Level</option>
                    <option value="Commission">Commission</option>
                    <option value="AccPack">Acc Packs</option>
                    <option value="Coupon">Coupon</option>
                    <!--<option value="ProductId">Theory Product Id</option>-->
                </select>&nbsp;
                <a href="#" class="myBtn btn btn-danger" onclick="applyBulkAction()">Apply</a>
                <a  class="iqedit-trigger btn btn-primary mx-1">Add Ghost</a>
            </div>
        </div>
    </div>


    <div id="emailUnit" class="emailmodal">
        <div class="emailmodal-dialog" style="margin: 1.75rem auto; max-width: 600px;">
            <div class="emailmodal-content">
                <div class="emailmodal-header">
                    <h5 class="emailmodal-title" id="emailUnitTitle">
                        Copy and Paste into Outlook <span class="unit-stock-number"></span>
                    </h5>
                    <button type="button" class="emailmodal-close" onclick="hideEmailModal()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
    
                <div class="emailmodal-body">
                    <div class="unit-info" id="unitBlocks">
                        <table class="emailmodal-unit-table" id="unitBlock" border="1" width="100%" cellpadding="5" bordercolor="#eeeeee">
                            <tbody>
                                <tr>
                                    <td style="font-size: 16px;">
                                        <strong>2023 Vanderhall JEAN GREY null <br> CARMEL - <span>In Stock</span></strong>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <table border="0">
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <a>
                                                            <img width="100%" style="width: 100%;max-width:500px;height:auto;" src="https://cdnmedia.endeavorsuite.com/images/catalogs/24776/products/showdisplay/54a85493-5562-4103-8df8-137cc86955d9.jpg" alt="Unit Image">
                                                        </a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td valign="top" width="100%">
                                        <table width="100%" border="0">
                                            <tbody>
                                                <tr>
                                                    <td><strong>Unit Price</strong></td>
                                                    <td style="text-align:right"><strong>$43,950.00</strong></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2"><hr></td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Our Price: </strong></td>
                                                    <td style="text-align:right"><strong>$43,950.00</strong></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">
                                                        <p style="color: #999;">
                                                            <small>
                                                                Price DOES NOT include:
                                                                Documentation Fee: $199,
                                                                State Title Application Fee: $30,
                                                                Set-up: $0,
                                                                Dealer Destination Fee: $1199,
                                                                Sales Tax.
                                                            </small>
                                                        </p>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <br>
                </div>
    
                <div class="emailmodal-footer">
                    <button type="button" class="btn btn-primary" onclick="copyEmailUnit()">
                        Copy Unit
                    </button>
                </div>
            </div>
        </div>
    </div>

<div class="modal fade" id="emailUnit" tabindex="-1" role="dialog" aria-labelledby="emailUnitLabel" aria-modal="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="emailUnitTitle">
                        Copy and Paste into Outlook <span class="unit-stock-number"></span>
                    </h5>
                    <button type="button" class="close" onclick="hideModal()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                    <div class="unit-info" id="unitBlocks">
                        <table class="unit-table" id="unitBlock" border="1" width="100%" cellpadding="5" bordercolor="#eeeeee">
                            <tbody>
                                <tr>
                                    <td style="font-size: 16px;">
                                        <strong>2023 Vanderhall JEAN GREY null <br> CARMEL - <span>In Stock</span></strong>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <table border="0">
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <a href="null">
                                                            <img width="100%" style="width: 100%;" src="null" alt="Vehicle Image">
                                                        </a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td valign="top" width="100%">
                                        <table width="100%" border="0">
                                            <tbody>
                                                <tr>
                                                    <td><strong>Unit Price</strong></td>
                                                    <td style="text-align:right"><strong>$43,950.00</strong></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2"><hr></td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Our Price: </strong></td>
                                                    <td style="text-align:right"><strong>$43,950.00</strong></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">
                                                        <p style="color: #999;">
                                                            <small>
                                                                Price DOES NOT include:
                                                                Documentation Fee: $199,
                                                                State Title Application Fee: $30,
                                                                Set-up: $0,
                                                                Dealer Destination Fee: $1199,
                                                                Sales Tax.
                                                            </small>
                                                        </p>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <br>
                </div>
     
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="copyUnit()">Copy Unit</button>
                </div>
            </div>
        </div>
    </div>


    <div class="secondeditmodal-overlay" id="secondEditModal">
        <div class="secondeditmodal-container">
            <div class="secondeditmodal-content">
                <div class="secondeditmodal-header">
                    <div class="secondeditmodal-title">Edit Unit - VH04511</div>
                    <button class="secondeditmodal-close-btn" onclick="closeSecondEditModal()">&times;</button>
                </div>
    
                <div id="secondeditmodal-validation-error" class="secondeditmodal-validation-error"></div>
    
                <form class="secondeditmodal-form secondeditmodal-formee secondeditmodal-formee-mini" id="secondEditModalForm" data-ajax="true" data-ajax-method="POST">
                    
                    <div class="secondeditmodal-tabs" id="secondeditmodal-tabs">
                        <ul class="secondeditmodal-tabs-nav" role="tablist">
                            <li class="secondeditmodal-tabs-tab active" role="tab" aria-controls="secondeditmodal-tabs-1" aria-selected="true">
                                <a class="secondeditmodal-tabs-anchor" onclick="switchSecondEditTab(event, 'secondeditmodal-tabs-1')">Main</a>
                            </li>
                            <li class="secondeditmodal-tabs-tab" role="tab" aria-controls="secondeditmodal-tabs-2" aria-selected="false">
                                <a class="secondeditmodal-tabs-anchor" onclick="switchSecondEditTab(event, 'secondeditmodal-tabs-2')">Commission</a>
                            </li>
                            <li class="secondeditmodal-tabs-tab" role="tab" aria-controls="secondeditmodal-tabs-3" aria-selected="false">
                                <a class="secondeditmodal-tabs-anchor" onclick="switchSecondEditTab(event, 'secondeditmodal-tabs-3')">Acc. Packs</a>
                            </li>
                            <li class="secondeditmodal-tabs-tab" role="tab" aria-controls="secondeditmodal-tabs-4" aria-selected="false">
                                <a class="secondeditmodal-tabs-anchor" onclick="switchSecondEditTab(event, 'secondeditmodal-tabs-4')">Linked Units</a>
                            </li>
                            <li class="secondeditmodal-tabs-tab" role="tab" aria-controls="secondeditmodal-tabs-5" aria-selected="false">
                                <a class="secondeditmodal-tabs-anchor" onclick="switchSecondEditTab(event, 'secondeditmodal-tabs-5')">Images</a>
                            </li>
                        </ul>
    
                        <!-- Main Tab -->
                        <div id="secondeditmodal-tabs-1" class="secondeditmodal-tabs-panel active" role="tabpanel">
                            <table class="secondeditmodal-info-table">
                                <tbody>
                                    <tr>
                                        <td class="secondeditmodal-boldy">MFg</td>
                                        <td>Vanderhall</td>
                                        <td class="secondeditmodal-boldy">Stock #</td>
                                        <td>VH04511</td>
                                    </tr>
                                    <tr>
                                        <td class="secondeditmodal-boldy">Model Name</td>
                                        <td>CARMEL</td>
                                        <td class="secondeditmodal-boldy">$ Expire Date</td>
                                        <td>01/01/2026</td>
                                    </tr>
                                    <tr>
                                        <td class="secondeditmodal-boldy">LS</td>
                                        <td>C=10/18/2025&nbsp;M=10/18/2025</td>
                                        <td class="secondeditmodal-boldy">Year</td>
                                        <td>2023</td>
                                    </tr>
                                    <tr>
                                        <td class="secondeditmodal-boldy">Invoice</td>
                                        <td>40930.91</td>
                                        <td class="secondeditmodal-boldy">MSRP Unit</td>
                                        <td>43950.00</td>
                                    </tr>
                                    <tr>
                                        <td class="secondeditmodal-boldy">Model Code</td>
                                        <td>CARMEL</td>
                                        <td class="secondeditmodal-boldy">Freight</td>
                                        <td>0.00</td>
                                    </tr>
                                    <tr>
                                        <td class="secondeditmodal-boldy">Color</td>
                                        <td>JEAN GREY</td>
                                        <td class="secondeditmodal-boldy"></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td class="secondeditmodal-boldy">Profit</td>
                                        <td>4218.09</td>
                                        <td class="secondeditmodal-boldy">Sale Price</td>
                                        <td>45149.00</td>
                                    </tr>
                                    <tr>
                                        <td class="secondeditmodal-boldy">VIN</td>
                                        <td>7KGTC2C2XPR004511</td>
                                        <td class="secondeditmodal-boldy">UI mod</td>
                                        <td>10/18/2025 8:36:59 AM</td>
                                    </tr>
                                </tbody>
                            </table>
    
                            <input type="hidden" id="secondeditmodal-muid" name="MUId" value="34858">
                            <input type="hidden" id="secondeditmodal-ghost" name="Ghost" value="False">
    
                            <div class="secondeditmodal-form-group">
                                MSRP Total: 
                            </div>
    
                            <div class="secondeditmodal-form-group">
                                <label for="secondeditmodal-autorv">
                                    <input type="checkbox" id="secondeditmodal-autorv" name="AutoRV" value="true">
                                    AutoRV
                                </label> |
                                
                                <label for="secondeditmodal-yellowtag">
                                    <input type="checkbox" id="secondeditmodal-yellowtag" name="YellowTag" value="true">
                                    Yellow Tag
                                </label> |
    
                                <label for="secondeditmodal-mapped">
                                    <input type="checkbox" id="secondeditmodal-mapped" name="Mapped" value="true" checked>
                                    MAP
                                </label> |
    
                                <select id="secondeditmodal-invstatus" name="InvStatus">
                                    <option value="0" selected>InStock</option>
                                    <option value="1">Sold</option>
                                    <option value="2">Pending</option>
                                </select> |
    
                                Sale Program: 
                                <select id="secondeditmodal-saleprogram" name="SaleProgramId">
                                    <option value="842">Default New Boat $2,500</option>
                                    <option value="33">Default New PWC</option>
                                    <option value="1120">Default New Scooter</option>
                                    <option value="26">Default Pre-Owned</option>
                                    <option value="81">Default Trailer</option>
                                    <option value="843">DNV $1,199 Freight</option>
                                    <option value="864">DNV $1,999 Freight</option>
                                    <option value="839">DNV $2,499 Freight</option>
                                    <option value="25" selected>DNV $899 Freight</option>
                                    <option value="1291">Vanderhall Carmel</option>
                                    <option value="835">Vanderhall Carmel 2</option>
                                    <option value="1253">Vanderhall Carmel Blackjack 2</option>
                                    <option value="1254">Vanderhall Carmel GTS</option>
                                    <option value="1155">Vanderhall MY23 Carmel GT</option>
                                    <option value="1287">Vanderhall MY24 Carmel</option>
                                    <option value="1279">Vanderhall MY24 Carmel GT</option>
                                    <option value="1255">Vanderhall Venice GTS</option>
                                </select>
                            </div>
    
                            <div class="secondeditmodal-form-group">
                                Quote: 
                                <select id="secondeditmodal-quotelevel" name="QuoteLevel">
                                    <option value="0">Level_0</option>
                                    <option value="1" selected>Level_1</option>
                                    <option value="2">Level_2</option>
                                    <option value="3">Level_3</option>
                                    <option value="4">Level_4</option>
                                </select> | 
                                Record Status: 
                                <select id="secondeditmodal-recstatus" name="RecStatus" title="Whether or not to exclude the units from missing check and other checks">
                                    <option value="0" selected>Included</option>
                                    <option value="1">Excluded</option>
                                </select>
                                Coupon: 
                                <select id="secondeditmodal-couponid" name="CouponId">
                                    <option value="3">15% off P &amp; A Vehicle Purchase</option>
                                    <option value="5">Free Helmet</option>
                                    <option value="6">Gift Card</option>
                                    <option value="7">Free Battery Tender</option>
                                    <option value="-1" selected>Not Set</option>
                                </select>
                            </div>
    
                            <input type="hidden" id="secondeditmodal-ghost2" name="Ghost" value="False">
                            <input type="hidden" id="secondeditmodal-b50linkid" name="B50LinkID" value="">
    
                            <div class="secondeditmodal-form-group">
                                B50 ProductID Link: 
                                <select id="secondeditmodal-b50theoryproductid" name="B50TheoryProductId">
                                    <option value="0" selected>No Ghost Link</option>
                                </select>
                            </div>
    
                            <div class="secondeditmodal-form-group">
                                B50 Model Type: (Change in 50 Below)
                            </div>
    
                            <div class="secondeditmodal-form-group">
                                Hot Deal 
                                <input type="checkbox" id="secondeditmodal-hotdeal" name="HotDeal" title="Flag for a hot deal (mobile app)" value="true">
                            </div>
    
                            <div class="secondeditmodal-form-group">
                                B50LinkID: Re-Cache Pic: 
                                <input type="checkbox" id="secondeditmodal-cachepic" name="CachePic" title="re-cache the pic on save" value="true">
                            </div>
    
                            <div class="secondeditmodal-form-group">
                                B50 Model Name: 
                                <input id="secondeditmodal-b50modelname" name="B50ModelName" style="width:600px;" type="text" value="">
                            </div>
    
                            <div class="secondeditmodal-form-group">
                                NAP: 
                                <input id="secondeditmodal-nap" name="NAP" style="width:300px;" type="text" value="0.00">
                            </div>
    
                            <hr class="secondeditmodal-hr">
    
                            <table class="secondeditmodal-iqtable" id="secondeditmodal-editor">
                                <thead>
                                    <tr>
                                        <th>Move</th>
                                        <th>Desc</th>
                                        <th>Item $</th>
                                        <th>Invoice $</th>
                                        <th>Begins</th>
                                        <th>Expires</th>
                                        <th>Type</th>
                                        <th>Delete</th>
                                    </tr>
                                </thead>
                                <tbody class="secondeditmodal-sortable" id="secondeditmodal-items-tbody">
                                    <tr class="secondeditmodal-sortable-handle">
                                        <td class="secondeditmodal-mover">Move<input type="hidden" name="MUItems[0].ItemNumber" value="0"></td>
                                        <td>
                                            <input type="hidden" name="MUItems[0].MUItemId" value="0" class="secondeditmodal-boxer">
                                            <input type="text" name="MUItems[0].ItemDesc" value="" style="width: 300px;">
                                        </td>
                                        <td><input type="text" name="MUItems[0].ItemAmount" class="secondeditmodal-boxer"></td>
                                        <td><input type="text" name="MUItems[0].ItemInvoice" class="secondeditmodal-boxer" title="charged against the gross profit"></td>
                                        <td><input type="text" name="MUItems[0].BeginDate" value="" class="secondeditmodal-iqdate secondeditmodal-hasdatepicker"></td>
                                        <td><input type="text" name="MUItems[0].EndDate" value="" class="secondeditmodal-iqdate secondeditmodal-hasdatepicker"></td>
                                        <td>
                                            <select name="MUItems[0].ItemFlag" title="lala">
                                                <option value="8">MfgRebate</option>
                                                <option value="9">BackRebate</option>
                                                <option value="64" selected>Discount</option>
                                                <option value="126">AccessoryInc</option>
                                                <option value="127">Accessory</option>
                                                <option value="128">Charge</option>
                                                <option value="132">Discretion</option>
                                                <option value="256">TradeIn</option>
                                            </select>
                                        </td>
                                        <td><a href="#" class="secondeditmodal-deletelink" onclick="deleteSecondEditRow(event)">Delete</a></td>
                                    </tr>
                                    <tr class="secondeditmodal-sortable-handle">
                                        <td class="secondeditmodal-mover">Move<input type="hidden" name="MUItems[1].ItemNumber" value="1"></td>
                                        <td>
                                            <input type="hidden" name="MUItems[1].MUItemId" value="0" class="secondeditmodal-boxer">
                                            <input type="text" name="MUItems[1].ItemDesc" value="" style="width: 300px;">
                                        </td>
                                        <td><input type="text" name="MUItems[1].ItemAmount" class="secondeditmodal-boxer"></td>
                                        <td><input type="text" name="MUItems[1].ItemInvoice" class="secondeditmodal-boxer" title="charged against the gross profit"></td>
                                        <td><input type="text" name="MUItems[1].BeginDate" value="" class="secondeditmodal-iqdate secondeditmodal-hasdatepicker"></td>
                                        <td><input type="text" name="MUItems[1].EndDate" value="" class="secondeditmodal-iqdate secondeditmodal-hasdatepicker"></td>
                                        <td>
                                            <select name="MUItems[1].ItemFlag" title="lala">
                                                <option value="8">MfgRebate</option>
                                                <option value="9">BackRebate</option>
                                                <option value="64" selected>Discount</option>
                                                <option value="126">AccessoryInc</option>
                                                <option value="127">Accessory</option>
                                                <option value="128">Charge</option>
                                                <option value="132">Discretion</option>
                                                <option value="256">TradeIn</option>
                                            </select>
                                        </td>
                                        <td><a href="#" class="secondeditmodal-deletelink" onclick="deleteSecondEditRow(event)">Delete</a></td>
                                    </tr>
                                    <tr class="secondeditmodal-sortable-handle">
                                        <td class="secondeditmodal-mover">Move<input type="hidden" name="MUItems[2].ItemNumber" value="2"></td>
                                        <td>
                                            <input type="hidden" name="MUItems[2].MUItemId" value="0" class="secondeditmodal-boxer">
                                            <input type="text" name="MUItems[2].ItemDesc" value="" style="width: 300px;">
                                        </td>
                                        <td><input type="text" name="MUItems[2].ItemAmount" class="secondeditmodal-boxer"></td>
                                        <td><input type="text" name="MUItems[2].ItemInvoice" class="secondeditmodal-boxer" title="charged against the gross profit"></td>
                                        <td><input type="text" name="MUItems[2].BeginDate" value="" class="secondeditmodal-iqdate secondeditmodal-hasdatepicker"></td>
                                        <td><input type="text" name="MUItems[2].EndDate" value="" class="secondeditmodal-iqdate secondeditmodal-hasdatepicker"></td>
                                        <td>
                                            <select name="MUItems[2].ItemFlag" title="lala">
                                                <option value="8">MfgRebate</option>
                                                <option value="9">BackRebate</option>
                                                <option value="64" selected>Discount</option>
                                                <option value="126">AccessoryInc</option>
                                                <option value="127">Accessory</option>
                                                <option value="128">Charge</option>
                                                <option value="132">Discretion</option>
                                                <option value="256">TradeIn</option>
                                            </select>
                                        </td>
                                        <td><a href="#" class="secondeditmodal-deletelink" onclick="deleteSecondEditRow(event)">Delete</a></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
    
                        <!-- Commission Tab -->
                        <div id="secondeditmodal-tabs-2" class="secondeditmodal-tabs-panel" role="tabpanel">
                            <div class="secondeditmodal-form-group">
                                Commission Program: 
                                <select id="secondeditmodal-commprogramid" name="CommProgramId">
                                    <option value="1" selected>Default New</option>
                                    <option value="2">Default Used - &lt; $8,999</option>
                                    <option value="15">Default Used - &gt; $8,999</option>
                                    <option value="40">TaoTao Scooter</option>
                                    <option value="48">Yellow Tag</option>
                                </select>
                            </div>
    
                            <input type="hidden" id="secondeditmodal-commitem-mucommitemid" name="CommItem.MUCommItemId" value="0">
    
                            <table class="secondeditmodal-info-table">
                                <thead>
                                    <tr>
                                        <th>Spec Comm. Desc:</th>
                                        <th>Spec Comm. Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><input title="Specific Commission Description" id="secondeditmodal-commitem-itemdesc" name="CommItem.ItemDesc" type="text" value=""></td>
                                        <td><input id="secondeditmodal-commitem-itemamount" name="CommItem.ItemAmount" title="specific commission amount" type="text" value=""></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
    
                        <!-- Acc. Packs Tab -->
                        <div id="secondeditmodal-tabs-3" class="secondeditmodal-tabs-panel" role="tabpanel">

                            <table class="secondeditmodal-info-table">
                                <thead>
                                    <tr>
                                        <th>Pack Name</th>
                                        <th>Brand</th>
                                        <th>MSRP</th>
                                        <th>Sale Price</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="5" style="text-align: center; padding: 20px;">No accessory packages available</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
    
                        <!-- Linked Units Tab -->
                        <div id="secondeditmodal-tabs-4" class="secondeditmodal-tabs-panel" role="tabpanel">
                            <table class="secondeditmodal-linked-units-table">
                                <tbody>
                                    <tr>
                                        <td><a href="#"><img src="https://via.placeholder.com/70x49?text=Unit" alt="Unit"></a></td>
                                        <td>SO242470</td>
                                        <td></td>
                                        <td>DF200APX4</td>
                                        <td>2022</td>
                                        <td>DF200APX4</td>
                                        <td>0.00</td>
                                    </tr>
                                    <tr>
                                        <td><a><img src="https://via.placeholder.com/70x49?text=Unit" alt="Unit"></a></td>
                                        <td>Y04558U</td>
                                        <td></td>
                                        <td>C3</td>
                                        <td>2007</td>
                                        <td>XF50WS</td>
                                        <td>0.00</td>
                                    </tr>
                                    <tr>
                                        <td><a><img src="https://via.placeholder.com/70x49?text=Unit" alt="Unit"></a></td>
                                        <td>SDB08199T</td>
                                        <td></td>
                                        <td>MOVE SWITCH 19 GALV</td>
                                        <td>2024</td>
                                        <td>T2RK</td>
                                        <td>0.00</td>
                                    </tr>
                                    <tr>
                                        <td><a><img src="https://via.placeholder.com/70x49?text=Unit" alt="Unit"></a></td>
                                        <td>SDBA6343PT</td>
                                        <td></td>
                                        <td>MOVE SWITCH 19 GALV</td>
                                        <td>2023</td>
                                        <td>T2PN</td>
                                        <td>0.00</td>
                                    </tr>
                                    <tr>
                                        <td><a><img src="https://via.placeholder.com/70x49?text=Unit" alt="Unit"></a></td>
                                        <td>SDB08555PT</td>
                                        <td></td>
                                        <td>MOVE SWITCH 19 PAINT</td>
                                        <td>2024</td>
                                        <td>T2RJ</td>
                                        <td>0.00</td>
                                    </tr>
                                    <tr>
                                        <td><a><img src="https://via.placeholder.com/70x49?text=Unit" alt="Unit"></a></td>
                                        <td>SDB12192PT</td>
                                        <td></td>
                                        <td>MOVE SWITCH 19 PAINT</td>
                                        <td>2024</td>
                                        <td>T2RJ</td>
                                        <td>0.00</td>
                                    </tr>
                                    <tr>
                                        <td><a><img src="https://via.placeholder.com/70x49?text=Unit" alt="Unit"></a></td>
                                        <td>Y1417691</td>
                                        <td></td>
                                        <td>EF2200iS</td>
                                        <td>2024</td>
                                        <td>EF2200ISZ</td>
                                        <td>599.00</td>
                                    </tr>
                                    <tr>
                                        <td><a><img src="https://via.placeholder.com/70x49?text=Unit" alt="Unit"></a></td>
                                        <td>Y1424988</td>
                                        <td></td>
                                        <td>EF2200iS</td>
                                        <td>2024</td>
                                        <td>EF2200ISZ</td>
                                        <td>599.00</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
    
                        <!-- Images Tab -->
                        <div id="secondeditmodal-tabs-5" class="secondeditmodal-tabs-panel" role="tabpanel">
                            <div class="secondeditmodal-form-group">
                                Use the Cache Pic check box to recache these pictures
                            </div>
                            <div class="secondeditmodal-image-preview">
                                <a href="#"><img src="https://via.placeholder.com/200x150?text=Thumbnail" alt="Thumbnail"></a>
                                <a href="#"><img src="https://via.placeholder.com/200x150?text=Medium" alt="Medium"></a>
                                <a href="#"><img src="https://via.placeholder.com/200x150?text=Full+Size" alt="Full Size"></a>
                            </div>
                        </div>
                    </div>
    
                    <div class="secondeditmodal-tabs-panel">
                        <input type="submit" class="secondeditmodal-submit-btn" value="Save Changes">
                    </div>
                </form>
            </div>
        </div>
                        </div>

    <div class="neweditmodal-overlay">
        <div class="neweditmodal-container">
            <div class="neweditmodal-header">
                <div class="neweditmodal-header-content">
                    <div class="neweditmodal-header-text">
                        <h4>Edit Major Unit: VH04511</h4>
                    </div>
                    <div class="neweditmodal-header-image"></div>
                </div>
                <button class="neweditmodal-close" onclick="neweditmodalClose()">
                    <i class="fa fa-times"></i>
                </button>
            </div>

            <div class="neweditmodal-tabs">
                <button class="neweditmodal-tab neweditmodal-active" onclick="neweditmodalSwitchTab(0)">Main</button>
                <button class="neweditmodal-tab" onclick="neweditmodalSwitchTab(1)">Commission</button>
                <button class="neweditmodal-tab" onclick="neweditmodalSwitchTab(2)">Acc. Packs</button>
                <button class="neweditmodal-tab" onclick="neweditmodalSwitchTab(3)">Linked Units</button>
                <button class="neweditmodal-tab" onclick="neweditmodalSwitchTab(4)">Images</button>
                <button class="neweditmodal-tab" onclick="neweditmodalSwitchTab(5)">Video/3D/PDF</button>
                <button class="neweditmodal-tab" onclick="neweditmodalSwitchTab(6)">Description</button>
                <button class="neweditmodal-tab" onclick="neweditmodalSwitchTab(7)">Standard Features</button>
            </div>

            <div class="neweditmodal-body">
                <!-- Tab 0: Main -->
                <div class="neweditmodal-tab-content neweditmodal-active">
                    <div class="neweditmodal-section">
                        <div class="neweditmodal-section-title">Specs</div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">MFG</label>
                                <span class="neweditmodal-value">Vanderhall</span>
                            </div>
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Stock #</label>
                                <span class="neweditmodal-value">VH04511</span>
                            </div>
                        </div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Model Name</label>
                                <span class="neweditmodal-value">CARMEL</span>
                            </div>
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Year</label>
                                <span class="neweditmodal-value">2023</span>
                            </div>
                        </div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Model Code</label>
                                <span class="neweditmodal-value">CARMEL</span>
                            </div>
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Color</label>
                                <span class="neweditmodal-value">JEAN GREY</span>
                            </div>
                        </div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">VIN</label>
                                <span class="neweditmodal-value">7KGTC2C2XPR004511</span>
                            </div>
                        </div>
                    </div>

                    <div class="neweditmodal-section">
                        <div class="neweditmodal-section-title">Pricing</div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">MSRP Unit</label>
                                <span class="neweditmodal-value">43950</span>
                            </div>
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">MSRP Total</label>
                                <span class="neweditmodal-value">43950</span>
                            </div>
                        </div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Freight</label>
                                <span class="neweditmodal-value">0</span>
                            </div>
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Invoice</label>
                                <span class="neweditmodal-value">40930.91</span>
                            </div>
                        </div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Profit</label>
                                <span class="neweditmodal-value">4218.09</span>
                            </div>
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Sale Price</label>
                                <span class="neweditmodal-value">45149</span>
                            </div>
                        </div>
                    </div>

                    <div class="neweditmodal-section">
                        <div class="neweditmodal-section-title">Dates</div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">$ Expire Date</label>
                                <span class="neweditmodal-value">10/21/2025</span>
                            </div>
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Created</label>
                                <span class="neweditmodal-value">10/18/2025</span>
                            </div>
                        </div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Last Modified</label>
                                <span class="neweditmodal-value">10/18/2025</span>
                            </div>
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">UI Mod</label>
                                <span class="neweditmodal-value">10/18/2025</span>
                            </div>
                        </div>
                    </div>

                    <div class="neweditmodal-section">
                        <div class="neweditmodal-section-title">Misc</div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Sale Program</label>
                                <select class="neweditmodal-select">
                                    <option>Vanderhall Carmel 2</option>
                                    <option>Vanderhall MY23 Carmel GT</option>
                                    <option>Vanderhall Carmel Blackjack 2</option>
                                    <option>Vanderhall Carmel GTS</option>
                                    <option>Vanderhall Venice GTS</option>
                                    <option>Vanderhall MY24 Carmel GT</option>
                                    <option>Vanderhall MY24 Carmel</option>
                                    <option>Vanderhall Carmel</option>
                                    <option selected>DNV $899 Freight</option>
                                </select>
                            </div>
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Status</label>
                                <select class="neweditmodal-select">
                                    <option selected>InStock</option>
                                    <option>Sold</option>
                                    <option>Pending</option>
                                </select>
                            </div>
                        </div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Quote Level</label>
                                <select class="neweditmodal-select">
                                    <option>Level_0</option>
                                    <option selected>Level_1</option>
                                    <option>Level_2</option>
                                    <option>Level_3</option>
                                    <option>Level_4</option>
                                </select>
                            </div>
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Record Status</label>
                                <select class="neweditmodal-select">
                                    <option selected>Included</option>
                                    <option>Excluded</option>
                                </select>
                            </div>
                        </div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Coupon</label>
                                <select class="neweditmodal-select">
                                    <option selected>Not Set</option>
                                    <option>15% off P & A Vehicle Purchase</option>
                                    <option>Free Rack</option>
                                    <option>Free Helmet</option>
                                    <option>Gift Card</option>
                                    <option>Free Battery Tender</option>
                                    <option>Free Bike Stand</option>
                                </select>
                            </div>
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">NAP</label>
                                <input type="number" class="neweditmodal-input" step="0.01" min="0.00" name="NAP">
                            </div>
                        </div>
                        <div class="neweditmodal-checkbox-row">
                            <div class="neweditmodal-checkbox">
                                <input type="checkbox" id="neweditmodal-autoRV">
                                <label for="neweditmodal-autoRV">Auto RV</label>
                            </div>
                            <div class="neweditmodal-checkbox">
                                <input type="checkbox" id="neweditmodal-yellowTag">
                                <label for="neweditmodal-yellowTag">Yellow Tag</label>
                            </div>
                            <div class="neweditmodal-checkbox">
                                <input type="checkbox" id="neweditmodal-mapped" checked>
                                <label for="neweditmodal-mapped">Map</label>
                            </div>
                            <div class="neweditmodal-checkbox">
                                <input type="checkbox" id="neweditmodal-hotDeal">
                                <label for="neweditmodal-hotDeal">Hot Deal</label>
                            </div>
                        </div>
                    </div>

                    <div class="neweditmodal-section">
                        <div class="neweditmodal-section-title">B50 Data</div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Link</label>
                                <a href="#" class="neweditmodal-link" target="_blank">VH04511</a>
                            </div>
                        </div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Model Type</label>
                                <span class="neweditmodal-value">(change in 50 Below)</span>
                            </div>
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">LinkId</label>
                                <span class="neweditmodal-value"></span>
                            </div>
                        </div>
                        <div class="neweditmodal-row">
                            <div class="neweditmodal-field">
                                <label class="neweditmodal-label">Model Name</label>
                                <input type="text" class="neweditmodal-input" name="B50ModelName">
                            </div>
                        </div>
                    </div>

                    <div class="neweditmodal-items-section">
                        <div class="neweditmodal-items-title">Associated Items</div>
                        <div class="neweditmodal-items-header">
                            <div>&nbsp;</div>
                            <div>Description</div>
                            <div>Item</div>
                            <div>Invoice</div>
                            <div>Begins</div>
                            <div>Expires</div>
                            <div>Type</div>
                            <div>&nbsp;</div>
                        </div>
                        <div class="neweditmodal-item-form">
                            <div>&nbsp;</div>
                            <div><input type="text" placeholder="Description"></div>
                            <div><input type="text" placeholder="Amount"></div>
                            <div><input type="text" placeholder="Invoice"></div>
                            <div><input type="date"></div>
                            <div><input type="date"></div>
                            <div>
                                <select>
                                    <option value="">Select Type</option>
                                    <option>BackRebate</option>
                                    <option>MfgRebate</option>
                                    <option>Discount</option>
                                    <option>AccessoryInc</option>
                                    <option>Accessory</option>
                                    <option>Charge</option>
                                    <option>Freebie</option>
                                    <option>Discretion</option>
                                    <option>TradeIn</option>
                                </select>
                            </div>
                            <div>
                                <button class="neweditmodal-add-btn" onclick="neweditmodalAddItem()">
                                    <i class="fa fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 1: Commission -->
                <div class="neweditmodal-tab-content">
                    <div class="neweditmodal-commission-section">
                        <div class="neweditmodal-commission-field">
                            <label class="neweditmodal-label">Commission Program:</label>
                            <select class="neweditmodal-select" style="margin-top: 10px;">
                                <option>Options</option>
                            </select>
                        </div>
                        <div class="neweditmodal-commission-inputs">
                            <div>
                                <label class="neweditmodal-label">Spec Comm Desc:</label>
                                <input type="text" class="neweditmodal-input" style="margin-top: 8px;">
                            </div>
                            <div>
                                <label class="neweditmodal-label">Spec Comm Amount</label>
                                <input type="text" class="neweditmodal-input" style="margin-top: 8px;">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: Acc. Packs -->
                <div class="neweditmodal-tab-content">
                    <div class="neweditmodal-empty-state">
                        <p>Pack Name | Brand | MSRP | Sale Price</p>
                    </div>
                </div>

                <!-- Tab 3: Linked Units -->
                <div class="neweditmodal-tab-content">
                    <div class="neweditmodal-empty-state">
                        <p>Linked Units Data</p>
                    </div>
                </div>

                <!-- Tab 4: Images -->
                <div class="neweditmodal-tab-content">
                    <div class="neweditmodal-empty-state">
                        <p>No images uploaded</p>
                    </div>
                </div>

                <!-- Tab 5: Video/3D/PDF -->
                <div class="neweditmodal-tab-content">
                    <div class="neweditmodal-video-header">
                        <div>URL/Code</div>
                        <div>Platform</div>
                    </div>
                    <div class="neweditmodal-video-form">
                        <div>
                            <input type="text" placeholder="Enter URL or code">
                        </div>
                        <div>
                            <select>
                                <option value="">Select Platform</option>
                                <option>Video</option>
                                <option>3D</option>
                                <option>PDF</option>
                            </select>
                        </div>
                        <div>
                            <button class="neweditmodal-add-btn" onclick="neweditmodalAddVideo()">
                                <i class="fa fa-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Tab 6: Description -->
                <div class="neweditmodal-tab-content">
                    <div class="neweditmodal-section">
                        <textarea class="neweditmodal-editor" placeholder="Enter description here..."></textarea>
                    </div>
                </div>

                <!-- Tab 7: Standard Features -->
                <div class="neweditmodal-tab-content">
                    <div class="neweditmodal-section">
                        <textarea class="neweditmodal-editor" placeholder="Enter standard features here..."></textarea>
                    </div>
                </div>
            </div>

            <div class="neweditmodal-footer">
                <button class="neweditmodal-btn neweditmodal-btn-success" onclick="neweditmodalSave()">Save</button>
                <button class="neweditmodal-btn neweditmodal-btn-danger" onclick="neweditmodalClose()">Close</button>
            </div>
        </div>
    </div>



    <!-- Edit Brochure Modal -->
<div class="modal fade" id="editBrochureModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header bg-secondary text-white">
                <h4 class="modal-title" id="modalTitle">Edit Brochure Unit: <span id="modalStockNumber"></span></h4>
                <button type="button" class="close text-white" data-dismiss="modal">
                    <span>&times;</span>
                </button>
            </div>
            <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                <!-- Nav Tabs -->
                <ul class="nav nav-tabs" id="editTabs" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="main-tab" data-toggle="tab" href="#main" role="tab">Main</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="commission-tab" data-toggle="tab" href="#commission" role="tab">Commission</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="accpacks-tab" data-toggle="tab" href="#accpacks" role="tab">Acc. Packs</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="linked-tab" data-toggle="tab" href="#linked" role="tab">Linked Units</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="images-tab" data-toggle="tab" href="#images" role="tab">Images</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="3d-tab" data-toggle="tab" href="#3d" role="tab">3D</a>
                    </li>
                </ul>

                <!-- Tab Content -->
                <div class="tab-content mt-3" id="editTabContent">
                    <!-- Main Tab -->
                    <div class="tab-pane fade show active" id="main" role="tabpanel">
                        <form id="brochureForm">
                            <!-- Specs Section -->
                            <div class="row mt-3 pt-3" style="border-top: 1px solid black;">
                                <div class="col-12"><strong>Specs</strong></div>
                            </div>
                            <div class="row mt-2">
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">MFG</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="editMfg" readonly style="background-color: #e9ecef;">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">Stock #</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="editStock" readonly style="background-color: #e9ecef;">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">Model Name</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="editModelName">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">Year</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="editYear" readonly style="background-color: #e9ecef;">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">Model Code</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="editModelCode">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">Color</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="editColor">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">VIN</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" value="BROCHURE" readonly style="background-color: #e9ecef;">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Pricing Section -->
                            <div class="row mt-4 pt-3" style="border-top: 1px solid black;">
                                <div class="col-12"><strong>Pricing</strong></div>
                            </div>
                            <div class="row mt-2">
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">MSRP Unit</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="editMSRP">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">MSRP Total</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="editMSRPTotal" readonly style="background-color: #e9ecef;">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">Freight</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="editFreight">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">Invoice</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="editInvoice">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">Profit</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="editProfit" readonly style="background-color: #e9ecef;">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">Sale Price</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="editSalePrice" readonly style="background-color: #e9ecef;">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Misc Section -->
                            <div class="row mt-4 pt-3" style="border-top: 1px solid black;">
                                <div class="col-12"><strong>Misc</strong></div>
                            </div>
                            <div class="row mt-2">
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">Sale Program</label>
                                        <div class="col-sm-9">
                                            <select class="form-control" id="editSaleProgram">
                                                <option value="25">DNV $899 Freight</option>
                                                <option value="26">Default Pre-Owned</option>
                                                <option value="33">Default New PWC</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">Inv. Status</label>
                                        <div class="col-sm-9">
                                            <select class="form-control" id="editInvStatus">
                                                <option value="0">InStock</option>
                                                <option value="1">Sold</option>
                                                <option value="2">Pending</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">Quote Level</label>
                                        <div class="col-sm-9">
                                            <select class="form-control" id="editQuoteLevel">
                                                <option value="0">Level_0</option>
                                                <option value="1">Level_1</option>
                                                <option value="2">Level_2</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">NAP</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="editNAP">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Checkboxes -->
                            <div class="row mt-2">
                                <div class="col-md-6">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" id="editAutoRV">
                                        <label class="form-check-label">Auto RV</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" id="editYellowTag">
                                        <label class="form-check-label">Yellow Tag</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" id="editMapped">
                                        <label class="form-check-label">Map</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" id="editHotDeal">
                                        <label class="form-check-label">Hot Deal</label>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- Other Tabs (Placeholders) -->
                    <div class="tab-pane fade" id="commission" role="tabpanel">
                        <p>Commission content...</p>
                    </div>
                    <div class="tab-pane fade" id="accpacks" role="tabpanel">
                        <p>Accessory Packs content...</p>
                    </div>
                    <div class="tab-pane fade" id="linked" role="tabpanel">
                        <p>Linked Units content...</p>
                    </div>
                    <div class="tab-pane fade" id="images" role="tabpanel">
                        <p>Images content...</p>
                    </div>
                    <div class="tab-pane fade" id="3d" role="tabpanel">
                        <p>3D content...</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger mr-auto" onclick="deleteBrochure()">DELETE BROCHURE UNIT</button>
                <button type="button" class="btn btn-success" onclick="saveBrochure()">Save</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>



    <div class="container">
        <h2>Major Units Inventory</h2>
        



        <nav class="navbar navbar-expand-lg fixed-top navbar-dark">
            <a class="navbar-brand" href="/view-units">
                <img style="height: 1.5rem;" src="https://newportal.flatoutmotorcycles.com/portal/content/images/fom-logo-inverse.png"/>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
    
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/view-units">Home</a>
                    </li>
                    
                    <!-- Major Units Dropdown -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="majorUnitsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Major Units
                        </a>
                        <div class="dropdown-menu" aria-labelledby="majorUnitsDropdown">
                            <a class="dropdown-item" href="/view-units/">Major Units</a>
                            <a class="dropdown-item" href="/major-units-grid/">Major Units Grid</a>
                            <a class="dropdown-item" href="/mu-missing/">MU Missing (50B)</a>
                            <a class="dropdown-item" href="/cycle-trade-units/">CycleTrader Units</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="/">MU Import</a>
                            <a class="dropdown-item" href="/">CycleTrader Import</a>
                            <a class="dropdown-item" href="/">Leads Import</a>
                        </div>
                    </li>
                    
                    <!-- Sale Programs Dropdown -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="saleProgramsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Sale Programs
                        </a>
                        <div class="dropdown-menu" aria-labelledby="saleProgramsDropdown">
                            <a class="dropdown-item" href="/sale-programs/">Sale Programs</a>
                            <a class="dropdown-item" href="/coupons/">Coupons</a>
                            
                        </div>
                    </li>
                    
                    <!-- Accessories Dropdown -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="accessoriesDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Accessories
                        </a>
                        <div class="dropdown-menu" aria-labelledby="accessoriesDropdown">
                            <a class="dropdown-item" href="/view-units/">Acc Packs</a>
                            <a class="dropdown-item" href="/view-units/">PartImport</a>
                        </div>
                    </li>
                    
                    <!-- My Sales Dropdown -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="mySalesDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            My Sales
                        </a>
                        <div class="dropdown-menu" aria-labelledby="mySalesDropdown">
                            <a class="dropdown-item" href="/">My Sales</a>
                            <a class="dropdown-item" href="/quotes/">Quotes</a>
                            <a class="dropdown-item" href="/contact/">Contacts</a>
                            <a class="dropdown-item" href="/commission/">Commission</a>
                            <a class="dropdown-item" href="/">Finance</a>
                            <a class="dropdown-item" href="/">Sales Mgmt</a>
                        </div>
                    </li>
                    
                    <!-- Channels Dropdown -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="channelsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Channels
                        </a>
                        <div class="dropdown-menu" aria-labelledby="channelsDropdown">
                            <a href="https://www.cycletrader.com/motorcycle-dealers/detail/flat%20out%20motorsports-704923?type=356953&dealerid=704923" target="_blank" class="dropdown-item">Cycle Trader Motorcycles</a>
                            <a href="https://www.atvtrader.com/atv-dealers/detail/flat%20out%20motorsports-704923?type=1049211046&dealerid=704923" target="_blank" class="dropdown-item">ATV Trader Side by Side</a>
                            <a href="https://www.pwctrader.com/pwc-dealers/detail/flat%20out%20motorsports-704923?type=9404794&dealerid=704923" target="_blank" class="dropdown-item">PWC Trader Personal Watercraft</a>
                            <a href="https://www.atvtrader.com/atv-dealers/detail/flat%20out%20motorsports-704923?type=528553&dealerid=704923" target="_blank" class="dropdown-item">ATV Trader ATV Four Wheeler</a>
                        </div>
                    </li>
                </ul>
                
                <!-- User Info and Logout -->
                <span class="navbar-text">
                    <i class="fa fa-user-circle" aria-hidden="true"></i> admin 
                    <a class="btn btn-danger btn-sm ml-2" href="/login/">Logout</a>
                </span>
            </div>
        </nav>
    
        <h2 class="my-2" style="font-weight: bold;">
            <small style="color: red;">Showing 9 Units</small>
            <button class="btn btn-danger pull-right" id="bulkEditToggle" onclick="toggleBulkEdit()">Bulk Edit</button>
            <button class="btn btn-info pull-right mr-2" type="button">New Brochure</button>
        </h2>
        
        <div class="container-fluid">
            <div class="filter-container">
                <h3 class="mb-3">Inventory Filters</h3>
                
                <!-- Search Row -->
                <div class="search-row">
                    <input 
                        type="text" 
                        class="form-control" 
                        id="FilterSearch" 
                        placeholder="Search by Stock #, Lot, VIN, etc."
                        title="by Stock #, Lot, vin, b50LinkID | notheory, yellowtag, expired, stockout, excluded, hot, savings"
                        style="flex: 1; min-width: 250px;">
                    <button class="btn btn-danger" onclick="applyFilters()">
                        <i class="fa fa-search"></i> Search
                    </button>
                    <button class="btn btn-primary" onclick="clearFilters()">
                        Clear
                    </button>
                </div>
        
                <!-- Filter Grid -->
                <div class="filter-grid">
                    <!-- Manufacturer Filter -->
                    <select class="form-control" id="FilterMfg" onchange="updateFilters()">
                        <option value="">-Mfg</option>
                        <option value="Recent">Recent Modified</option>
                        <option value="NewlyAdded">Newly Added</option>
                        <option value="Sold">Sold</option>
                        <option value="BelowCost">Below Cost</option>
                        <option value="NotDiscounted">Not Discounted</option>
                        <option value="SOUTHBAY">SOUTHBAY</option>
                        <option value="SEA DOO">SEA DOO</option>
                        <option value="CAN-AM">CAN-AM</option>
                        <option value="KAWASAKI">KAWASAKI</option>
                        <option value="SUZUKI">SUZUKI</option>
                        <option value="YACHT CLUB">YACHT CLUB</option>
                        <option value="SLINGSHOT">SLINGSHOT</option>
                        <option value="YAMAHA">YAMAHA</option>
                        <option value="SHORE HAVEN">SHORE HAVEN</option>
                        <option value="Vanderhall">Vanderhall</option>
                        <option value="HARLEY DAVIDSON">HARLEY DAVIDSON</option>
                        <option value="MOTO MORINI">MOTO MORINI</option>
                        <option value="INDIAN">INDIAN</option>
                        <option value="SSR">SSR</option>
                        <option value="HONDA">HONDA</option>
                        <option value="QJMOTOR">QJMOTOR</option>
                        <option value="CF MOTO">CF MOTO</option>
                        <option value="BMW">BMW</option>
                        <option value="SKI DOO">SKI DOO</option>
                        <option value="KTM">KTM</option>
                        <option value="HUSQVARNA">HUSQVARNA</option>
                        <option value="TRIUMPH">TRIUMPH</option>
                    </select>
        
                    <!-- Year Filter -->
                    <select class="form-control" id="FilterYear" onchange="updateFilters()">
                        <option value="">-Year</option>
                        <option value="2026">2026</option>
                        <option value="2025">2025</option>
                        <option value="2024">2024</option>
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                        <option value="2020">2020</option>
                        <option value="2019">2019</option>
                        <option value="2018">2018</option>
                        <option value="2017">2017</option>
                        <option value="2015">2015</option>
                        <option value="2014">2014</option>
                        <option value="2013">2013</option>
                    </select>
        
                    <!-- Model Type Filter -->
                    <select class="form-control" id="FilterModelType" onchange="updateFilters()">
                        <option value="">-Model Type</option>
                        <option value="Pontoons">Pontoons</option>
                        <option value="3 Wheel Motorcycle">3 Wheel Motorcycle</option>
                        <option value="Side x Side">Side x Side</option>
                        <option value="Street Bikes">Street Bikes</option>
                        <option value="Cruiser/V-Twin">Cruiser/V-Twin</option>
                        <option value="Dirt Bikes">Dirt Bikes</option>
                        <option value="PWC Trailers">PWC Trailers</option>
                        <option value="Scooters">Scooters</option>
                        <option value="Outboard Motors">Outboard Motors</option>
                        <option value="ATV">ATV</option>
                        <option value="PWC">PWC</option>
                        <option value="Pontoon Trailers">Pontoon Trailers</option>
                    </select>
        
                    <!-- Model Style Filter -->
                    <select class="form-control" id="FilterModelTypeStyle" onchange="updateFilters()">
                        <option value="">-Model Style</option>
                        <option value="Sport">Sport</option>
                        <option value="Touring">Touring</option>
                        <option value="Sport Touring">Sport Touring</option>
                        <option value="Side x Side">Side x Side</option>
                        <option value="Naked">Naked</option>
                        <option value="Youth">Youth</option>
                        <option value="Motocross">Motocross</option>
                        <option value="Off-Road">Off-Road</option>
                        <option value="Standard">Standard</option>
                        <option value="Utility">Utility</option>
                        <option value="Performance">Performance</option>
                        <option value="Cruiser">Cruiser</option>
                        <option value="Recreation">Recreation</option>
                        <option value="Luxury">Luxury</option>
                    </select>
        
                    <!-- Auto RV Filter -->
                    <select class="form-control" id="FilterAutoRV" onchange="updateFilters()">
                        <option value="">-Auto RV Ad</option>
                        <option value="true">Auto RV</option>
                        <option value="false">Auto RV Non</option>
                    </select>
        
                    <!-- Store Filter -->
                    <select class="form-control" id="FilterBamStore" onchange="updateFilters()">
                        <option value="">-Store</option>
                        <option value="0">FOM</option>
                        <option value="1">FOP</option>
                    </select>
        
                    <!-- Map Filter -->
                    <select class="form-control" id="FilterMapped" onchange="updateFilters()">
                        <option value="">-Map</option>
                        <option value="true">ON MAP</option>
                        <option value="false">Off MAP</option>
                    </select>
        
                    <!-- New/Used Filter -->
                    <select class="form-control" id="FilterNewUsed" onchange="updateFilters()">
                        <option value="">-New/Used</option>
                        <option value="0">New</option>
                        <option value="1">Used</option>
                    </select>
        
                    <!-- Floor Plan Filter -->
                    <select class="form-control" id="FilterFFPlan" onchange="updateFilters()">
                        <option value="">-Floor Plan</option>
                        <option value="Expired">Expired</option>
                        <option value="Yellow">Yellow (30 days)</option>
                        <option value="Green">Green</option>
                    </select>
        
                    <!-- Lot Filter -->
                    <select class="form-control" id="FilterLot" onchange="updateFilters()">
                        <option value="">-Lot</option>
                        <option value="CUSTOM">CUSTOM</option>
                        <option value="GHOST">GHOST</option>
                        <option value="-1">Not Custom</option>
                        <option value="NOTGHOST">Not Ghost</option>
                    </select>
        
                    <!-- Commission Program Filter -->
                    <select class="form-control" id="FilterCommissionProgram" onchange="updateFilters()">
                        <option value="">-Commission Program</option>
                        <option value="1">Default New</option>
                        <option value="2">Default Used - < $8,999</option>
                    </select>
        
                    <!-- Age Filter -->
                    <select class="form-control" id="FilterAge" onchange="updateFilters()" title="How long have we had the unit">
                        <option value="">-Age</option>
                        <option value="lt30"> < 30</option>
                        <option value="30to90">30-89</option>
                        <option value="90to180">90-179</option>
                        <option value="gt180"> > 180</option>
                    </select>
        
                    <!-- Sort Filter -->
                    <select class="form-control" id="FilterSort" onchange="updateFilters()" title="What to sort by">
                        <option value="">-Sort</option>
                        <option value="Model">Model</option>
                        <option value="Savings">Savings</option>
                        <option value="Commission">Commission</option>
                        <option value="GrossProfit">Gross Profit</option>
                        <option value="FloorDays">Floor Days</option>
                    </select>
                </div>
        
                <!-- Selected Filters Display -->
                <div class="selected-filters" id="selectedFilters" style="display: none;">
                    <strong>Active Filters:</strong>
                    <div id="filterBadges"></div>
                </div>
            </div>
        </div>

        <div class="table-wrapper">
            <table id="inventoryTable">
                <thead>
                    <tr>
                        <th class="checkbox-cell">
                            <input type="checkbox" id="selectAll" onchange="toggleSelectAll()">
                        </th>
                        <th class="img-cell">Image/<br>Web Link</th>
                        <th class="sortable" data-sort="stock">Stock<br>Number</th>
                        <th class="mfg-cell sortable" data-sort="mfg">MFG</th>
                        <th class="sortable" data-sort="year">Year</th>
                        <th class="sortable" data-sort="model">Model Name<br>Store, Map, Usage</th>
                        <th class="sortable" data-sort="quote">Quote<br>Level</th>
                        <th class="sortable" data-sort="msrp">MSRP<br>Total</th>
                        <th class="sortable" data-sort="sale">Sale<br>Price</th>
                        <th>NAP</th>
                        <th class="sortable" data-sort="profit">Profit<br>Margin</th>
                        <th>Brochure</th>
                        <th>New Edit</th>
                        <th class="sortable" data-sort="web">Website<br>Price (ARI)</th>
                        <th>Cycle<br>Trader</th>
                        <th class="sortable" data-sort="location">Location/<br>Status</th>
                        <th>Program</th>
                        <th class="sortable" data-sort="days">Days On<br>Floor</th>
                        <th>Actions/Alerts</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">Total Units</div>
                <div class="stat-value" id="totalUnits">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Total MSRP</div>
                <div class="stat-value" id="totalMSRP">$0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Total Profit</div>
                <div class="stat-value" id="totalProfit">$0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Selected</div>
                <div class="stat-value" id="selectedCount">0</div>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>

        if(document.querySelector('.iqedit-trigger')){
            document.querySelector('.iqedit-trigger').addEventListener('click',()=>{
                window.location.reload(true)
            })
        }
function showCouponBulkModal() {
    const unitIdsString = Array.from(selectedIds).join(',');
    document.getElementById('couponUnitIds').value = unitIdsString;
    
    // Get first selected unit's manufacturer for display
    let mfgToShow = 'CAN-AM'; // default
    if (selectedIds.size > 0) {
        const firstUnitId = Array.from(selectedIds)[0];
        const unit = inventoryData.find(u => u.id === firstUnitId);
        if (unit) {
            mfgToShow = unit.mfg;
        }
    }
    document.getElementById('couponMfgDisplay').textContent = mfgToShow;
    
    const modal = document.getElementById('couponBulkModal');
    modal.style.display = 'block';
    modal.classList.add('show');
    document.body.classList.add('modal-open');
    
    if (!document.querySelector('.modal-backdrop')) {
        const backdrop = document.createElement('div');
        backdrop.className = 'modal-backdrop fade show';
        document.body.appendChild(backdrop);
    }
}

function closeCouponBulkModal() {
    const modal = document.getElementById('couponBulkModal');
    modal.style.display = 'none';
    modal.classList.remove('show');
    document.body.classList.remove('modal-open');
    
    const backdrop = document.querySelector('.modal-backdrop');
    if (backdrop) {
        backdrop.remove();
    }
}

function submitCouponBulk() {
    const couponId = document.getElementById('couponSelect').value;
    
    if (couponId === '-') {
        swal("Error!", "Please select a coupon.", "error");
        return;
    }
    
    const formData = {
        UnitIds: document.getElementById('couponUnitIds').value,
        CouponIdSel: couponId
    };
    
    swal({
        title: "Processing...",
        text: "Updating coupon for selected units",
        icon: "info",
        buttons: false,
        closeOnClickOutside: false,
    });
    
    setTimeout(() => {
        console.log('Coupon Bulk Update:', formData);
        
        closeCouponBulkModal();
        const couponText = document.getElementById('couponSelect').options[document.getElementById('couponSelect').selectedIndex].text;
        swal("Success!", `Coupon "${couponText}" applied to ${selectedIds.size} units!`, "success");
    }, 1000);
}



function showCommissionBulkModal() {
    const unitIdsString = Array.from(selectedIds).join(',');
    document.getElementById('commissionUnitIds').value = unitIdsString;
    
    const modal = document.getElementById('commissionBulkModal');
    modal.style.display = 'block';
    modal.classList.add('show');
    document.body.classList.add('modal-open');
    
    if (!document.querySelector('.modal-backdrop')) {
        const backdrop = document.createElement('div');
        backdrop.className = 'modal-backdrop fade show';
        document.body.appendChild(backdrop);
    }
}

function closeCommissionBulkModal() {
    const modal = document.getElementById('commissionBulkModal');
    modal.style.display = 'none';
    modal.classList.remove('show');
    document.body.classList.remove('modal-open');
    
    const backdrop = document.querySelector('.modal-backdrop');
    if (backdrop) {
        backdrop.remove();
    }
}

function submitCommissionBulk() {
    const programId = document.getElementById('commissionProgramSelect').value;
    
    if (programId === '-1') {
        swal("Error!", "Please select a commission program.", "error");
        return;
    }
    
    const formData = {
        UnitIds: document.getElementById('commissionUnitIds').value,
        CommProgramId: programId,
        CommDesc: document.getElementById('commissionDesc').value || null,
        CommAmount: document.getElementById('commissionAmount').value || null
    };
    
    swal({
        title: "Processing...",
        text: "Updating commission for selected units",
        icon: "info",
        buttons: false,
        closeOnClickOutside: false,
    });
    
    setTimeout(() => {
        console.log('Commission Bulk Update:', formData);
        
        closeCommissionBulkModal();
        const programText = document.getElementById('commissionProgramSelect').options[document.getElementById('commissionProgramSelect').selectedIndex].text;
        swal("Success!", `Commission program "${programText}" applied to ${selectedIds.size} units!`, "success");
    }, 1000);
}

function applyBulkAction() {
    if (selectedIds.size === 0) {
        swal("Error!", "Please select at least one unit to apply bulk action.", "error");
        return;
    }
    
    const action = document.getElementById('ddlBulkAction').value;
    
    // If MAP action is selected, show the MAP modal
    if (action === 'MAP') {
        showMapBulkModal();
        return;
    }
    
    if (action === 'Coupon') {
    showCouponBulkModal();
    return;
}


    if (action === 'Commission') {
    showCommissionBulkModal();
    return;
}

    // If Sale Program action is selected, show the Sale Program modal
    if (action === 'SP') {
        showSaleProgramModal();
        return;
    }
    
    // If Auto RV action is selected, show the Auto RV modal
    if (action === 'AutoRV') {
        showAutoRVModal();
        return;
    }
    
    // If Yellow Tag action is selected, show the Yellow Tag modal
    if (action === 'YellowTag') {
        showYellowTagModal();
        return;
    }
    
    // If Quote Level action is selected, show the Quote Level modal
    if (action === 'QuoteLevel') {
        showQuoteLevelModal();
        return;
    }
    
    // For other actions, show confirmation
    swal({
        title: "Apply Bulk Action?",
        text: `Apply "${action}" action to ${selectedIds.size} selected units?`,
        icon: "warning",
        buttons: true,
        dangerMode: true,
    }).then((willApply) => {
        if (willApply) {
            console.log('Applying action:', action, 'to units:', Array.from(selectedIds));
            swal("Success!", `Bulk action "${action}" applied to ${selectedIds.size} units!`, "success");
        }
    });
}
function showQuoteLevelModal() {
    // Set the unit IDs
    const unitIdsString = Array.from(selectedIds).join(',');
    document.getElementById('quoteLevelUnitIds').value = unitIdsString;
    
    // Show modal
    const modal = document.getElementById('quoteLevelModal');
    modal.style.display = 'block';
    modal.classList.add('show');
    document.body.classList.add('modal-open');
    
    // Add backdrop
    if (!document.querySelector('.modal-backdrop')) {
        const backdrop = document.createElement('div');
        backdrop.className = 'modal-backdrop fade show';
        document.body.appendChild(backdrop);
    }
}

function closeQuoteLevelModal() {
    const modal = document.getElementById('quoteLevelModal');
    modal.style.display = 'none';
    modal.classList.remove('show');
    document.body.classList.remove('modal-open');
    
    // Remove backdrop
    const backdrop = document.querySelector('.modal-backdrop');
    if (backdrop) {
        backdrop.remove();
    }
}

function submitQuoteLevelBulk() {
    const quoteLevelValue = document.getElementById('quoteLevelSelect').value;
    const quoteLevelText = document.getElementById('quoteLevelSelect').options[document.getElementById('quoteLevelSelect').selectedIndex].text;
    
    const formData = {
        UnitIds: document.getElementById('quoteLevelUnitIds').value,
        QuoteLevel: quoteLevelValue
    };
    
    // Show loading
    swal({
        title: "Processing...",
        text: "Updating Quote Level for selected units",
        icon: "info",
        buttons: false,
        closeOnClickOutside: false,
    });
    
    // Simulate AJAX call (replace with your actual endpoint)
    setTimeout(() => {
        console.log('Quote Level Bulk Update:', formData);
        
        closeQuoteLevelModal();
        swal("Success!", `Quote Level "${quoteLevelText}" applied to ${selectedIds.size} units!`, "success");
        
        // Optionally refresh the table
        // renderTable();
    }, 1000);
    
    /* 
    // Actual AJAX implementation:
    $.ajax({
        url: "/Portal/Admin/MUBulkQuoteLevel",
        type: "POST",
        data: formData,
        success: function (data, textStatus, jqXHR) {
            if (data.Success == true) {
                closeQuoteLevelModal();
                swal("Success!", "Quote Level updated successfully!", "success");
                renderTable(); // Refresh the table
            } else {
                swal("Error!", "Failed to update Quote Level.", "error");
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            swal("Error!", "An error occurred while updating.", "error");
        }
    });
    */
}



function showYellowTagModal() {
    // Set the unit IDs
    const unitIdsString = Array.from(selectedIds).join(',');
    document.getElementById('yellowTagUnitIds').value = unitIdsString;
    
    // Show modal
    const modal = document.getElementById('yellowTagModal');
    modal.style.display = 'block';
    modal.classList.add('show');
    document.body.classList.add('modal-open');
    
    // Add backdrop
    if (!document.querySelector('.modal-backdrop')) {
        const backdrop = document.createElement('div');
        backdrop.className = 'modal-backdrop fade show';
        document.body.appendChild(backdrop);
    }
}

function closeYellowTagModal() {
    const modal = document.getElementById('yellowTagModal');
    modal.style.display = 'none';
    modal.classList.remove('show');
    document.body.classList.remove('modal-open');
    
    // Remove backdrop
    const backdrop = document.querySelector('.modal-backdrop');
    if (backdrop) {
        backdrop.remove();
    }
}

function submitYellowTagBulk() {
    const formData = {
        UnitIds: document.getElementById('yellowTagUnitIds').value,
        YellowTag: document.getElementById('yellowTagCheckbox').checked
    };
    
    // Show loading
    swal({
        title: "Processing...",
        text: "Updating Yellow Tag status for selected units",
        icon: "info",
        buttons: false,
        closeOnClickOutside: false,
    });
    
    // Simulate AJAX call (replace with your actual endpoint)
    setTimeout(() => {
        console.log('Yellow Tag Bulk Update:', formData);
        
        closeYellowTagModal();
        swal("Success!", `Yellow Tag status updated for ${selectedIds.size} units!`, "success");
        
        // Optionally refresh the table
        // renderTable();
    }, 1000);
    
    /* 
    // Actual AJAX implementation:
    $.ajax({
        url: "/Portal/Admin/MUBulkYellowTag",
        type: "POST",
        data: formData,
        success: function (data, textStatus, jqXHR) {
            if (data.Success == true) {
                closeYellowTagModal();
                swal("Success!", "Yellow Tag status updated successfully!", "success");
                renderTable(); // Refresh the table
            } else {
                swal("Error!", "Failed to update Yellow Tag status.", "error");
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            swal("Error!", "An error occurred while updating.", "error");
        }
    });
    */
}



function showAutoRVModal() {
    // Set the unit IDs
    const unitIdsString = Array.from(selectedIds).join(',');
    document.getElementById('autoRVUnitIds').value = unitIdsString;
    
    // Show modal
    const modal = document.getElementById('autoRVModal');
    modal.style.display = 'block';
    modal.classList.add('show');
    document.body.classList.add('modal-open');
    
    // Add backdrop
    if (!document.querySelector('.modal-backdrop')) {
        const backdrop = document.createElement('div');
        backdrop.className = 'modal-backdrop fade show';
        document.body.appendChild(backdrop);
    }
}

function closeAutoRVModal() {
    const modal = document.getElementById('autoRVModal');
    modal.style.display = 'none';
    modal.classList.remove('show');
    document.body.classList.remove('modal-open');
    
    // Remove backdrop
    const backdrop = document.querySelector('.modal-backdrop');
    if (backdrop) {
        backdrop.remove();
    }
}

function submitAutoRVBulk() {
    const formData = {
        UnitIds: document.getElementById('autoRVUnitIds').value,
        AutoRV: document.getElementById('autoRVCheckbox').checked
    };
    
    // Show loading
    swal({
        title: "Processing...",
        text: "Updating Auto RV status for selected units",
        icon: "info",
        buttons: false,
        closeOnClickOutside: false,
    });
    
    // Simulate AJAX call (replace with your actual endpoint)
    setTimeout(() => {
        console.log('Auto RV Bulk Update:', formData);
        
        closeAutoRVModal();
        swal("Success!", `Auto RV status updated for ${selectedIds.size} units!`, "success");
        
        // Optionally refresh the table
        // renderTable();
    }, 1000);
    
    /* 
    // Actual AJAX implementation:
    $.ajax({
        url: "/Portal/Admin/MUBulkAutoRV",
        type: "POST",
        data: formData,
        success: function (data, textStatus, jqXHR) {
            if (data.Success == true) {
                closeAutoRVModal();
                swal("Success!", "Auto RV status updated successfully!", "success");
                renderTable(); // Refresh the table
            } else {
                swal("Error!", "Failed to update Auto RV status.", "error");
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            swal("Error!", "An error occurred while updating.", "error");
        }
    });
    */
}


function showSaleProgramModal() {
    // Set the unit IDs
    const unitIdsString = Array.from(selectedIds).join(',');
    document.getElementById('spUnitIds').value = unitIdsString;
    
    // Populate the select options from document 1
    const selectElement = document.getElementById('spSaleProgramId');
    selectElement.innerHTML = `
        <option value="858">MY25 Maverick X3 Turbo (2 Seat)</option>
        <option value="931">MY23 Spyder F3 Limited</option>
        <option value="1030">MY24 Ryker 600</option>
        <option value="1039">MY25 Commander 700 XT</option>
        <option value="1040">MY24 Maverick X3 (2 Seat)</option>
        <option value="1106">MY24 Spyder F3 LIMITED</option>
        <option value="1109">MY24 Defender HD9</option>
        <option value="1110">MY25 Defender HD7</option>
        <option value="1149">MY24 Outlander 850</option>
        <option value="1156">MY23 Spyder RT Sea To Sky</option>
        <option value="1165">MY25 Renegade 70/110</option>
        <option value="1167">MY25 Outlander 500/700</option>
        <option value="1171">MY25 Maverick X3 (MAX)</option>
        <option value="1174">MY25 Defender HD10 Limited</option>
        <option value="1175">MY25 Defender HD9</option>
        <option value="1176">MY25 Maverick Sport (2 Seat)</option>
        <option value="1179">MY25 Defender HD10</option>
        <option value="1185">MY25 Outlander 850/1000</option>
        <option value="1190">MY25 Spyder RT</option>
        <option value="1191">MY25 Spyder Canyon</option>
        <option value="1192">MY25 Spyder F3</option>
        <option value="1193">MY25 Ryker Rally</option>
        <option value="1194">MY25 Ryker 900 Sport</option>
        <option value="1196">MY25 Ryker 600</option>
        <option value="1237">MY24 Spyder F3 S</option>
        <option value="1239">MY24 Spyder RT Limited</option>
        <option value="1241">MY24 Spyder RT Base</option>
        <option value="1301">MY25 Defender HD10 Limited Max</option>
        <option value="1305">MY23 Spyder F3 Limited - Blue Satin Only</option>
        <option value="1309">MY25 Maverick X3 Turbo RR (2 Seat)</option>
        <option value="1319">MY24 Maverick X3 Xrc 64"</option>
        <option value="1347">MY25 Defender HD9 CAB</option>
        <option value="1359">MY26 Defender HD11 Cab</option>
        <option value="1365">MY26 Defender HD11</option>
        <option value="1366">MY26 Spyder RT</option>
        <option value="1367">MY26 Spyder F3</option>
        <option value="1368">MY26 Spyder Canyon</option>
        <option value="1369">MY26 Ryker Rally</option>
        <option value="1370">MY26 Ryker 900 Sport</option>
        <option value="1371">MY26 Ryker 600</option>
        <option value="1372">MY26 Renegade 70/110</option>
        <option value="1373">MY26 Outlander 850/1000</option>
    `;
    
    // Show modal
    const modal = document.getElementById('saleProgramModal');
    modal.style.display = 'block';
    modal.classList.add('show');
    document.body.classList.add('modal-open');
    
    // Add backdrop
    if (!document.querySelector('.modal-backdrop')) {
        const backdrop = document.createElement('div');
        backdrop.className = 'modal-backdrop fade show';
        document.body.appendChild(backdrop);
    }
}

function closeSaleProgramModal() {
    const modal = document.getElementById('saleProgramModal');
    modal.style.display = 'none';
    modal.classList.remove('show');
    document.body.classList.remove('modal-open');
    
    // Remove backdrop
    const backdrop = document.querySelector('.modal-backdrop');
    if (backdrop) {
        backdrop.remove();
    }
}

function submitSaleProgramBulk() {
    const formData = {
        UnitIds: document.getElementById('spUnitIds').value,
        SaleProgramId: document.getElementById('spSaleProgramId').value
    };
    
    const selectedOption = document.getElementById('spSaleProgramId').options[document.getElementById('spSaleProgramId').selectedIndex].text;
    
    // Show loading
    swal({
        title: "Processing...",
        text: "Updating Sale Program for selected units",
        icon: "info",
        buttons: false,
        closeOnClickOutside: false,
    });
    
    // Simulate AJAX call
    setTimeout(() => {
        console.log('Sale Program Bulk Update:', formData);
        
        closeSaleProgramModal();
        swal("Success!", `Sale Program "${selectedOption}" applied to ${selectedIds.size} units!`, "success");
    }, 1000);
}


function showMapBulkModal() {
    // Set the unit IDs
    const unitIdsString = ',' + Array.from(selectedIds).join(',');
    document.getElementById('mapUnitIds').value = unitIdsString;
    
    // Show modal
    const modal = document.getElementById('mapBulkModal');
    modal.style.display = 'block';
    modal.classList.add('show');
    document.body.classList.add('modal-open');
    
    // Add backdrop
    if (!document.querySelector('.modal-backdrop')) {
        const backdrop = document.createElement('div');
        backdrop.className = 'modal-backdrop fade show';
        document.body.appendChild(backdrop);
    }
}

function closeMapBulkModal() {
    const modal = document.getElementById('mapBulkModal');
    modal.style.display = 'none';
    modal.classList.remove('show');
    document.body.classList.remove('modal-open');
    
    // Remove backdrop
    const backdrop = document.querySelector('.modal-backdrop');
    if (backdrop) {
        backdrop.remove();
    }
}

function submitMapBulk() {
    const formData = {
        UnitIds: document.getElementById('mapUnitIds').value,
        Maped: document.getElementById('mapMapped').checked
    };
    
    // Show loading
    swal({
        title: "Processing...",
        text: "Updating MAP status for selected units",
        icon: "info",
        buttons: false,
        closeOnClickOutside: false,
    });
    
    // Simulate AJAX call (replace with your actual endpoint)
    setTimeout(() => {
        console.log('MAP Bulk Update:', formData);
        
        closeMapBulkModal();
        swal("Success!", `MAP status updated for ${selectedIds.size} units!`, "success");
        
        // Optionally refresh the table
        // renderTable();
    }, 1000);
    
    /* 
    // Actual AJAX implementation:
    $.ajax({
        url: "/Portal/Admin/MUBulkMAP",
        type: "POST",
        data: formData,
        success: function (data) {
            if (data.Success == true) {
                closeMapBulkModal();
                swal("Success!", "MAP status updated successfully!", "success");
                renderTable(); // Refresh the table
            } else {
                swal("Error!", "Failed to update MAP status.", "error");
            }
        },
        error: function () {
            swal("Error!", "An error occurred while updating.", "error");
        }
    });
    */
}

// Close modal when clicking outside
// Close modal when clicking outside (update existing function)
// Close modal when clicking outside (update existing function)
// Close modal when clicking outside (update existing function)
// Close modal when clicking outside (update existing function)
window.onclick = function(event) {
    const mapModal = document.getElementById('mapBulkModal');
    const spModal = document.getElementById('saleProgramModal');
    const rvModal = document.getElementById('autoRVModal');
    const ytModal = document.getElementById('yellowTagModal');
    const qlModal = document.getElementById('quoteLevelModal');
    
    if (event.target === mapModal) {
        closeMapBulkModal();
    }

    if (event.target === cpnModal) {
    closeCouponBulkModal();
}

    if (event.target === commModal) {
    closeCommissionBulkModal();
}
    if (event.target === spModal) {
        closeSaleProgramModal();
    }
    if (event.target === rvModal) {
        closeAutoRVModal();
    }
    if (event.target === ytModal) {
        closeYellowTagModal();
    }
    if (event.target === qlModal) {
        closeQuoteLevelModal();
    }
}


function toggleBulkEdit() {
    const bulkSection = document.getElementById('bulkEditSection');
    const button = document.getElementById('bulkEditToggle');
    
    if (bulkSection.style.display === 'none') {
        bulkSection.style.display = 'block';
        button.textContent = 'Hide Bulk Edit';
        button.classList.remove('btn-danger');
        button.classList.add('btn-secondary');
    } else {
        bulkSection.style.display = 'none';
        button.textContent = 'Bulk Edit';
        button.classList.remove('btn-secondary');
        button.classList.add('btn-danger');
    }
}


function showEmailModal() {
            const modal = document.getElementById('emailUnit');
            modal.classList.add('emailmodal-show');
            document.body.style.overflow = 'hidden';
        }

        function hideEmailModal() {
            const modal = document.getElementById('emailUnit');
            modal.classList.remove('emailmodal-show');
            document.body.style.overflow = 'auto';
        }

        function selectEmailElementContents(el) {
            const range = document.createRange();
            range.selectNodeContents(el);
            const sel = window.getSelection();
            sel.removeAllRanges();
            sel.addRange(range);
        }

        function copyEmailUnit() {
            const unitBlock = document.getElementById('unitBlock');
            selectEmailElementContents(unitBlock)
            
            try {
                document.execCommand('copy');
                alert('Unit copied to clipboard!');
            } catch (err) {
                alert('Failed to copy. Please select and copy manually.');
            }
            
            window.getSelection().removeAllRanges();
        }

     

       


 function openSecondEditModal() {
        const modal = document.getElementById('secondEditModal');
        modal.classList.add('show');
        document.body.style.overflow = 'hidden'; // Prevent background scrolling
    }

    // Close Modal Function
    function closeSecondEditModal() {
        const modal = document.getElementById('secondEditModal');
        modal.classList.remove('show');
        document.body.style.overflow = 'auto'; // Restore scrolling
    }

    // Close modal when clicking outside
    document.getElementById('secondEditModal').addEventListener('click', function(event) {
        if (event.target === this) {
            closeSecondEditModal();
        }
    });

    // Switch Tab Function
    function switchSecondEditTab(event, tabId) {
        event.preventDefault();
        
        // Hide all tab panels
        const panels = document.querySelectorAll('.secondeditmodal-tabs-panel');
        panels.forEach(panel => panel.classList.remove('active'));

        // Remove active class from all tabs
        const tabs = document.querySelectorAll('.secondeditmodal-tabs-tab');
        tabs.forEach(tab => {
            tab.classList.remove('active');
            tab.setAttribute('aria-selected', 'false');
        });

        // Show selected tab panel
        document.getElementById(tabId).classList.add('active');

        // Add active class to clicked tab
        event.target.closest('.secondeditmodal-tabs-tab').classList.add('active');
        event.target.closest('.secondeditmodal-tabs-tab').setAttribute('aria-selected', 'true');
    }

    // Delete Row Function
    function deleteSecondEditRow(event) {
        event.preventDefault();
        const row = event.target.closest('tr');
        
        if (confirm('Are you sure you want to delete this item?')) {
            row.style.backgroundColor = '#FF3700';
            row.style.transition = 'background-color 0.3s';
            
            setTimeout(() => {
                row.style.display = 'none';
                // Mark as deleted by setting ItemNumber to -1
                const hiddenInput = row.querySelector('input[type="hidden"][name*="ItemNumber"]');
                if (hiddenInput) {
                    hiddenInput.value = '-1';
                }
            }, 300);
        }
    }

    // Form Submission
    document.getElementById('secondEditModalForm').addEventListener('submit', function(event) {
        event.preventDefault();
        
        // Reindex the AccPackMUId (if needed)
        const accPackInputs = document.querySelectorAll('input[name$="AccPackMUId"]');
        accPackInputs.forEach((input, index) => {
            input.setAttribute('name', 'AccPacks[' + index + '].AccPackMUId');
        });

        // Show validation or submit
        const validationError = document.getElementById('secondeditmodal-validation-error');
        validationError.textContent = 'Form submitted successfully! (This is a demo)';
        validationError.style.display = 'block';
        validationError.style.color = 'green';
        validationError.style.borderColor = 'green';
        
        setTimeout(() => {
            validationError.style.display = 'none';
        }, 3000);

        console.log('Form data would be submitted here');
    });

    // Sortable functionality for table rows
    let secondEditDraggedRow = null;
    const secondEditTbody = document.getElementById('secondeditmodal-items-tbody');

    if (secondEditTbody) {
        secondEditTbody.addEventListener('dragstart', function(event) {
            const mover = event.target.closest('.secondeditmodal-mover');
            if (mover) {
                secondEditDraggedRow = event.target.closest('tr');
                event.dataTransfer.effectAllowed = 'move';
                secondEditDraggedRow.style.opacity = '0.5';
            }
        });

        secondEditTbody.addEventListener('dragend', function(event) {
            if (secondEditDraggedRow) {
                secondEditDraggedRow.style.opacity = '1';
                secondEditDraggedRow = null;
                
                // Update indices after drop
                updateSecondEditIndices();
            }
        });

        secondEditTbody.addEventListener('dragover', function(event) {
            event.preventDefault();
            const targetRow = event.target.closest('tr');
            
            if (targetRow && targetRow !== secondEditDraggedRow && secondEditDraggedRow) {
                const rect = targetRow.getBoundingClientRect();
                const midpoint = rect.top + rect.height / 2;
                
                if (event.clientY < midpoint) {
                    secondEditTbody.insertBefore(secondEditDraggedRow, targetRow);
                } else {
                    secondEditTbody.insertBefore(secondEditDraggedRow, targetRow.nextSibling);
                }
            }
        });

        secondEditTbody.addEventListener('drop', function(event) {
            event.preventDefault();
        });

        // Make all rows draggable
        const rows = secondEditTbody.querySelectorAll('tr');
        rows.forEach(row => {
            row.setAttribute('draggable', 'true');
        });
    }

    // Update row indices after sorting
    function updateSecondEditIndices() {
        const movers = document.querySelectorAll('.secondeditmodal-mover');
        movers.forEach((mover, index) => {
            const hiddenInput = mover.querySelector('input[type="hidden"]');
            if (hiddenInput) {
                hiddenInput.value = index;
            }
        });
    }

    // ESC key to close modal
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            const modal = document.getElementById('secondEditModal');
            if (modal.classList.contains('show')) {
                closeSecondEditModal();
            }
        }
    });

    // Simple date picker placeholder (you can replace with a real date picker library)
    document.querySelectorAll('.secondeditmodal-iqdate').forEach(function(input) {
        input.addEventListener('focus', function() {
            // This is where you would initialize a date picker
            // For now, it's just a text input with a placeholder
            if (!this.value) {
                this.placeholder = 'MM/DD/YYYY';
            }
        });
    });

    // Character limit and validation for specific fields
    document.getElementById('secondeditmodal-nap')?.addEventListener('input', function(e) {
        // Allow only numbers and decimal point
        this.value = this.value.replace(/[^0-9.]/g, '');
        
        // Ensure only one decimal point
        const parts = this.value.split('.');
        if (parts.length > 2) {
            this.value = parts[0] + '.' + parts.slice(1).join('');
        }
    });

    // Auto-save functionality (optional)
    let secondEditAutoSaveTimer = null;
    
    function secondEditAutoSave() {
        clearTimeout(secondEditAutoSaveTimer);
        secondEditAutoSaveTimer = setTimeout(function() {
            console.log('Auto-saving form data...');
            // Add your auto-save logic here
        }, 2000); // Save 2 seconds after user stops typing
    }

    // Add auto-save to all input fields
    document.querySelectorAll('#secondEditModalForm input, #secondEditModalForm select').forEach(function(element) {
        element.addEventListener('change', secondEditAutoSave);
        if (element.tagName === 'INPUT' && element.type === 'text') {
            element.addEventListener('input', secondEditAutoSave);
        }
    });

    // Add new item row functionality (optional enhancement)
    function addSecondEditItemRow() {
        const tbody = document.getElementById('secondeditmodal-items-tbody');
        const rowCount = tbody.querySelectorAll('tr').length;
        
        const newRow = document.createElement('tr');
        newRow.className = 'secondeditmodal-sortable-handle';
        newRow.setAttribute('draggable', 'true');
        
        newRow.innerHTML = `
            <td class="secondeditmodal-mover">Move<input type="hidden" name="MUItems[${rowCount}].ItemNumber" value="${rowCount}"></td>
            <td>
                <input type="hidden" name="MUItems[${rowCount}].MUItemId" value="0" class="secondeditmodal-boxer">
                <input type="text" name="MUItems[${rowCount}].ItemDesc" value="" style="width: 300px;">
            </td>
            <td><input type="text" name="MUItems[${rowCount}].ItemAmount" class="secondeditmodal-boxer"></td>
            <td><input type="text" name="MUItems[${rowCount}].ItemInvoice" class="secondeditmodal-boxer" title="charged against the gross profit"></td>
            <td><input type="text" name="MUItems[${rowCount}].BeginDate" value="" class="secondeditmodal-iqdate secondeditmodal-hasdatepicker"></td>
            <td><input type="text" name="MUItems[${rowCount}].EndDate" value="" class="secondeditmodal-iqdate secondeditmodal-hasdatepicker"></td>
            <td>
                <select name="MUItems[${rowCount}].ItemFlag" title="lala">
                    <option value="8">MfgRebate</option>
                    <option value="9">BackRebate</option>
                    <option value="64" selected>Discount</option>
                    <option value="126">AccessoryInc</option>
                    <option value="127">Accessory</option>
                    <option value="128">Charge</option>
                    <option value="132">Discretion</option>
                    <option value="256">TradeIn</option>
                </select>
            </td>
            <td><a href="#" class="secondeditmodal-deletelink" onclick="deleteSecondEditRow(event)">Delete</a></td>
        `;
        
        tbody.appendChild(newRow);
    }

    // Prevent form submission on Enter key in text fields
    document.getElementById('secondEditModalForm').addEventListener('keypress', function(event) {
        if (event.key === 'Enter' && event.target.tagName !== 'TEXTAREA') {
            event.preventDefault();
            return false;
        }
    });

    // Highlight required fields that are empty
    function validateSecondEditForm() {
        let isValid = true;
        const validationError = document.getElementById('secondeditmodal-validation-error');
        const errors = [];

        // Add your validation logic here
        // Example: Check if stock number exists
        const stockNumber = document.querySelector('.secondeditmodal-info-table td:nth-child(4)');
        if (!stockNumber || !stockNumber.textContent.trim()) {
            errors.push('Stock number is required');
            isValid = false;
        }

        if (!isValid) {
            validationError.innerHTML = errors.join('<br>');
            validationError.style.display = 'block';
            validationError.style.color = 'red';
            validationError.style.borderColor = 'red';
        } else {
            validationError.style.display = 'none';
        }

        return isValid;
    }

    // Add validation to form submission
    const originalSubmitHandler = document.getElementById('secondEditModalForm').onsubmit;
    document.getElementById('secondEditModalForm').addEventListener('submit', function(event) {
        if (!validateSecondEditForm()) {
            event.preventDefault();
            return false;
        }
    });

    // Format currency inputs
    function formatSecondEditCurrency(input) {
        let value = input.value.replace(/[^0-9.]/g, '');
        const parts = value.split('.');
        
        if (parts[0]) {
            parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        }
        
        if (parts.length > 2) {
            parts[1] = parts[1].substring(0, 2);
            value = parts[0] + '.' + parts[1];
        } else {
            value = parts.join('.');
        }
        
        input.value = value;
    }

    // Apply currency formatting to money fields
    document.querySelectorAll('.secondeditmodal-tdmoney input, .secondeditmodal-boxer').forEach(function(input) {
        input.addEventListener('blur', function() {
            formatSecondEditCurrency(this);
        });
    });



function neweditmodalSwitchTab(index) {
    document.querySelector('.neweditmodal-overlay').classList.toggle('neweditmodal-overlayactive')
            const tabs = document.querySelectorAll('.neweditmodal-tab');
            const contents = document.querySelectorAll('.neweditmodal-tab-content');
            
            tabs.forEach((tab, i) => {
                if (i === index) {
                    tab.classList.add('neweditmodal-active');
                } else {
                    tab.classList.remove('neweditmodal-active');
                }
            });
            
            contents.forEach((content, i) => {
                if (i === index) {
                    content.classList.add('neweditmodal-active');
                } else {
                    content.classList.remove('neweditmodal-active');
                }
            });
        }

        function neweditmodalClose() {
            swal({
                title: "Close Modal?",
                text: "Any unsaved changes will be lost.",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willClose) => {
                if (willClose) {
                    swal("Modal closed!", {
                        icon: "success",
                    });

                    document.querySelector('.neweditmodal-overlay').classList.remove('neweditmodal-overlayactive')

                    // In real implementation, hide or remove the modal
                }
            });
        }

        function neweditmodalSave() {
            swal("Success!", "Data has been saved successfully!", "success");
            // In real implementation, collect form data and save it via API
        }

        function neweditmodalAddItem() {
            const form = document.querySelector('.neweditmodal-item-form');
            const inputs = form.querySelectorAll('input, select');
            let hasData = false;
            
            inputs.forEach(input => {
                if (input.value) hasData = true;
            });
            
            if (hasData) {
                swal("Success!", "Item has been added!", "success");
                // Clear form
                inputs.forEach(input => input.value = '');
            } else {
                swal("Error!", "Please fill in at least one field.", "error");
            }
        }

        function neweditmodalAddVideo() {
            const form = document.querySelector('.neweditmodal-video-form');
            const inputs = form.querySelectorAll('input, select');
            let hasData = false;
            
            inputs.forEach(input => {
                if (input.value) hasData = true;
            });
            
            if (hasData) {
                swal("Success!", "Video has been added!", "success");
                // Clear form
                inputs.forEach(input => input.value = '');
            } else {
                swal("Error!", "Please enter a URL and select a platform.", "error");
            }
        }

        // Prevent modal from closing when clicking inside
        document.querySelector('.neweditmodal-container').addEventListener('click', function(e) {
            e.stopPropagation();
        });

        // Close modal when clicking overlay
        document.querySelector('.neweditmodal-overlay').addEventListener('click', function(e) {
            if (e.target === this) {
                neweditmodalClose();
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // ESC to close
            if (e.key === 'Escape') {
                neweditmodalClose();
            }
            // Ctrl/Cmd + S to save
            if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                e.preventDefault();
                neweditmodalSave();
            }
        });
        

function openEditModal(unitId) {
    const unit = inventoryData.find(u => u.id === unitId);
    if (!unit) return;

    // Populate modal with unit data
    document.getElementById('modalStockNumber').textContent = unit.stock;
    document.getElementById('editMfg').value = unit.mfg;
    document.getElementById('editStock').value = unit.stock;
    document.getElementById('editModelName').value = unit.model;
    document.getElementById('editYear').value = unit.year;
    document.getElementById('editModelCode').value = '';
    document.getElementById('editColor').value = '';
    document.getElementById('editMSRP').value = unit.msrp;
    document.getElementById('editMSRPTotal').value = unit.msrp;
    document.getElementById('editFreight').value = '';
    document.getElementById('editInvoice').value = unit.invoice;
    document.getElementById('editProfit').value = unit.profit;
    document.getElementById('editSalePrice').value = unit.salePrice;
    document.getElementById('editQuoteLevel').value = unit.quoteLevel;
    document.getElementById('editNAP').value = '';

    // Show modal
    $('#editBrochureModal').modal('show');
}

// Save Brochure
function saveBrochure() {
    alert('Brochure saved successfully!');
    $('#editBrochureModal').modal('hide');
}

// Delete Brochure
function deleteBrochure() {
    if (confirm('Are you sure you want to delete this brochure unit?')) {
        alert('Brochure deleted!');
        $('#editBrochureModal').modal('hide');
    }
}

        const inventoryData = [
            {
                id: 34834,
                stock: 'BRP-6MTD-1031916430',
                mfg: 'CAN-AM',
                year: 2026,
                model: 'DEFENDER HD11 MAX LIMITED (6MTD)',
                invoice: 35325.00,
                msrp: 37899.00,
                salePrice: 39098,
                otd: 42065,
                profit: 3773,
                quoteLevel: 1,
                location: 'ONORDER',
                program: 'DNV $899 Freight',
                days: 0,
                image: '../content/images/noimage.jpg',
                webLink: '',
                icons: ['fom', 'mapprotected', 'new', 'whttag']
            },
            {
                id: 34820,
                stock: 'SD-38TB-1031887841',
                mfg: 'SEA DOO',
                year: 2026,
                model: 'GTI 130 (PRE-ORDER TODAY) (38TB)',
                invoice: 10860.00,
                msrp: 12099.00,
                salePrice: 13298,
                otd: 14459,
                profit: 2438,
                quoteLevel: 1,
                location: 'ONORDER',
                program: 'DNV $899 Freight',
                days: 0,
                image: 'https://cdnmedia.endeavorsuite.com/images/catalogs/24776/products/showdisplay/54a85493-5562-4103-8df8-137cc86955d9.jpg',
                webLink: 'https://www.flatoutmotorcycles.com/inventory/unit-13690204i',
                icons: ['fom', 'mapprotected', '50below', 'new', 'whttag']
            },
            {
                id: 34807,
                stock: 'SD-29TE-1031887822',
                mfg: 'SEA DOO',
                year: 2026,
                model: 'GTI SE 130 (PRE-ORDER TODAY) (29TE)',
                invoice: 12303.00,
                msrp: 13299.00,
                salePrice: 14498,
                otd: 15743,
                profit: 2195,
                quoteLevel: 1,
                location: 'ONORDER',
                program: 'DNV $899 Freight',
                days: 0,
                image: 'https://cdnmedia.endeavorsuite.com/images/catalogs/24776/products/showdisplay/c2b287ba-cbe3-40f0-8610-39601097f2ed.jpg',
                webLink: 'https://www.flatoutmotorcycles.com/inventory/unit-13690047i',
                icons: ['fom', 'mapprotected', '50below', 'new', 'whttag']
            },
            {
                id: 34830,
                stock: 'SD-15TA-1031887784',
                mfg: 'SEA DOO',
                year: 2026,
                model: 'GTX 300 TECH PKG (PRE-ORDER (15TA)',
                invoice: 17011.00,
                msrp: 19849.00,
                salePrice: 21048,
                otd: 22751,
                profit: 4037,
                quoteLevel: 1,
                location: 'ONORDER',
                program: 'DNV $899 Freight',
                days: 0,
                image: 'https://cdnmedia.endeavorsuite.com/images/catalogs/24776/products/showdisplay/7146704b-c95c-4a80-9c9a-ffe3d3bf57d1.jpg',
                webLink: 'https://www.flatoutmotorcycles.com/inventory/unit-13689361i',
                icons: ['fom', 'mapprotected', '50below', 'new', 'whttag']
            },
            {
                id: 34814,
                stock: 'SD-26TC-1031887805',
                mfg: 'SEA DOO',
                year: 2026,
                model: 'GTX LIMITED 325 (PRE-ORDER TODAY) (26TC)',
                invoice: 20443.00,
                msrp: 22949.00,
                salePrice: 24148,
                otd: 26068,
                profit: 3705,
                quoteLevel: 1,
                location: 'ONORDER',
                program: 'DNV $899 Freight',
                days: 0,
                image: 'https://cdnmedia.endeavorsuite.com/images/catalogs/24776/products/showdisplay/fb7c0885-a46d-4629-b4fa-605fba2b9194.jpg',
                webLink: 'https://www.flatoutmotorcycles.com/inventory/unit-13689084i',
                icons: ['fom', 'mapprotected', '50below', 'new', 'whttag']
            },
            {
                id: 34827,
                stock: 'SD-22TD-1031887789',
                mfg: 'SEA DOO',
                year: 2026,
                model: 'RXT-X 325 TECH PKG (PRE-ORDER (22TD)',
                invoice: 19871.00,
                msrp: 22299.00,
                salePrice: 23498,
                otd: 25373,
                profit: 3627,
                quoteLevel: 1,
                location: 'ONORDER',
                program: 'DNV $899 Freight',
                days: 0,
                image: 'https://cdnmedia.endeavorsuite.com/images/catalogs/24776/products/showdisplay/ed05b260-50e1-4b1a-820e-8af7e2d1a45c.jpg',
                webLink: 'https://www.flatoutmotorcycles.com/inventory/unit-13689544i',
                icons: ['fom', 'mapprotected', '50below', 'new', 'whttag']
            },
            {
                id: 34848,
                stock: 'Y01583',
                mfg: 'YAMAHA',
                year: 2026,
                model: 'KODIAK 700 (YFM70KDXTG)',
                invoice: 7413.00,
                msrp: 7899.00,
                salePrice: 9098,
                otd: 9965,
                profit: 1685,
                quoteLevel: 1,
                location: 'CUSTOM',
                program: 'DNV $899 Freight',
                days: 0,
                image: 'https://cdnmedia.endeavorsuite.com/images/catalogs/24596/products/showdisplay/85fa11c7-932f-4249-95b4-0dc281b93451.jpg',
                webLink: 'https://www.flatoutmotorcycles.com/inventory/unit-13687786i',
                icons: ['fom', 'mapfree', '50below', 'new', 'whttag']
            },
            {
                id: 34799,
                stock: 'SD-66TA-1031887846',
                mfg: 'SEA DOO',
                year: 2026,
                model: 'SPARK 3UP TRIXX (PRE-ORDER TODAY) (66TA)',
                invoice: 10319.00,
                msrp: 10099.00,
                salePrice: 11298,
                otd: 12319,
                profit: 979,
                quoteLevel: 1,
                location: 'ONORDER',
                program: 'DNV $899 Freight',
                days: 0,
                image: 'https://cdnmedia.endeavorsuite.com/images/catalogs/24776/products/showdisplay/e6a19462-63af-4523-a9e4-18210fc897c0.jpg',
                webLink: 'https://www.flatoutmotorcycles.com/inventory/unit-13690309i',
                icons: ['fom', 'mapprotected', '50below', 'new', 'whttag']
            },
            {
                id: 34832,
                stock: 'Y20695',
                mfg: 'YAMAHA',
                year: 2025,
                model: 'YZF-R7 (YZFR7SB)',
                invoice: 89.00,
                msrp: 9199.00,
                salePrice: 10398,
                otd: 11356,
                profit: 10309,
                quoteLevel: 1,
                location: 'CUSTOM',
                program: 'DNV $899 Freight',
                days: 0,
                image: 'https://cdnmedia.endeavorsuite.com/images/organizations/2f6fb18d-0219-47a3-8ba2-4a5123522365/inventory/13675254/YZF-R7-Raven-Black-Y16893-016.jpg',
                webLink: 'https://www.flatoutmotorcycles.com/inventory/unit-13675254i',
                icons: ['fom', 'mapfree', '50below', 'new', 'whttag']
            }
        ];

        let currentSort = { column: null, direction: 'asc' };
        let filteredData = [...inventoryData];
        let selectedIds = new Set();

        function formatCurrency(amount) {
            return '$' + amount.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
        }

        function renderTable(data = filteredData) {
            const tbody = document.getElementById('tableBody');
            
            if (data.length === 0) {
                tbody.innerHTML = '<tr><td colspan="19" class="no-results">No units found matching your criteria</td></tr>';
                updateStats(0, 0, 0);
                return;
            }

            tbody.innerHTML = data.map((item, index) => `
                <tr class="${index % 2 === 0 ? 'odd' : 'even'}">
                    <td class="checkbox-cell">
                        <input type="checkbox" class="unit-checkbox" value="${item.id}" ${selectedIds.has(item.id) ? 'checked' : ''} onchange="updateSelection(${item.id})">
                    </td>
                    <td class="img-cell">
                        ${item.webLink ? `<a href="${item.webLink}" target="_blank">` : ''}
                        <img src="${item.image}" alt="Unit">
                        ${item.webLink ? `</a>` : ''}
                    </td>
                    <td>${item.stock}</td>
                    <td class="mfg-cell">
                        <img src="/Portal/content/icons/${item.mfg.replace(' ', '-')}.png" alt="${item.mfg}" title="${item.mfg}">
                    </td>
                    <td><span style="font-weight: 600;">${item.year}</span></td>
                    <td>
                        <div class="model-name">${item.model}</div>
                        <div class="mu-icons">
                            ${item.icons.map(icon => `<img src="/Portal/content/icons/${icon}.png" alt="${icon}">`).join('')}
                        </div>
                    </td>
                    <td>
                        <a href="/portalquote.html" class="btn btn-dark btn-sm btn-block">${item.quoteLevel}</a>
                    </td>
                    <td>
                        <span class="badge badge-light btn-block" title="Invoice: ${formatCurrency(item.invoice)}">${formatCurrency(item.msrp)}</span>
                    </td>
                    <td>
                        <span class="badge badge-light btn-block" title="OTD: ${formatCurrency(item.otd)}">${formatCurrency(item.salePrice)}</span>
                    </td>
                    <td>
                        <span class="badge badge-light btn-block"></span>
                    </td>
                    <td>
                        <a class="btn btn-outline-success btn-sm btn-block">${formatCurrency(item.profit)}</a>
                    </td>
                    <td>
                        <button class="btn btn-info btn-sm" onclick="openEditModal(${item.id})">Duplicate</button>
                    </td>
                    <td>
                       <td>
    <button class="btn btn-primary btn-sm" onclick="openEditModal(${item.id})">New Edit</button>
</td>
                    </td>
                    <td>
                        <button class="btn btn-outline-danger btn-sm btn-block">${formatCurrency(item.salePrice)}</button>
                    </td>
                    <td></td>
                    <td>
                        <span class="badge badge-light btn-block">${item.location}</span>
                    </td>
                    <td>
                        <a class="btn btn-outline-danger btn-sm truncate" href="/Portal/Admin/SaleProgramEdit/25" title="${item.program}">${item.program}...</a>
                    </td>
                    <td style="text-align: center;">
                        <span class="badge badge-secondary">
                            <span style="font-size: 130%; line-height: 20px;">${item.days}</span>
                        </span>
                    </td>
                    <td>
                        <div class="btn-group">
                            <a class="btn-sm btn-secondary">📊<br>Profit</a>
                            <a style="cursor:pointer;"  onclick="openSecondEditModal()" class="btn-sm btn-secondary">⚙️<br>Edit</a>
                            <button onclick="showEmailModal()" class="btn-sm btn-secondary">✉️<br>Email</button>
                            <a href="/meuquote" class="btn-sm btn-secondary">📋<br>Quote</a>
                        </div>
                        <div class="mu-alerts">
                            <span  class="badge badge-warning">ARI MISMATCH</span>
                        </div>
                    </td>
                </tr>
            `).join('');

            const totalMSRP = data.reduce((sum, item) => sum + item.msrp, 0);
            const totalProfit = data.reduce((sum, item) => sum + item.profit, 0);
            updateStats(data.length, totalMSRP, totalProfit);
        }

        function updateStats(units, msrp, profit) {
            document.getElementById('totalUnits').textContent = units;
            document.getElementById('totalMSRP').textContent = formatCurrency(msrp);
            document.getElementById('totalProfit').textContent = formatCurrency(profit);
            document.getElementById('selectedCount').textContent = selectedIds.size;
        }

        function sortTable(column) {
            if (currentSort.column === column) {
                currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.column = column;
                currentSort.direction = 'asc';
            }

            filteredData.sort((a, b) => {
                let valA = a[column];
                let valB = b[column];

                if (typeof valA === 'string') {
                    valA = valA.toLowerCase();
                    valB = valB.toLowerCase();
                }

                if (valA < valB) return currentSort.direction === 'asc' ? -1 : 1;
                if (valA > valB) return currentSort.direction === 'asc' ? 1 : -1;
                return 0;
            });

            document.querySelectorAll('th.sortable').forEach(th => {
                th.classList.remove('sort-asc', 'sort-desc');
            });

            const header = document.querySelector(`th[data-sort="${column}"]`);
            if (header) {
                header.classList.add(currentSort.direction === 'asc' ? 'sort-asc' : 'sort-desc');
            }

            renderTable();
        }

        function filterTable() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const mfgFilter = document.getElementById('mfgFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const yearFilter = document.getElementById('yearFilter').value;

            filteredData = inventoryData.filter(item => {
                const matchesSearch = !searchTerm || 
                    item.stock.toLowerCase().includes(searchTerm) ||
                    item.model.toLowerCase().includes(searchTerm) ||
                    item.mfg.toLowerCase().includes(searchTerm);

                const matchesMfg = !mfgFilter || item.mfg === mfgFilter;
                const matchesStatus = !statusFilter || item.location === statusFilter;
                const matchesYear = !yearFilter || item.year.toString() === yearFilter;

                return matchesSearch && matchesMfg && matchesStatus && matchesYear;
            });

            renderTable();
        }

        function toggleSelectAll() {
            const selectAll = document.getElementById('selectAll').checked;
            selectedIds.clear();
            
            if (selectAll) {
                filteredData.forEach(item => selectedIds.add(item.id));
            }

            renderTable();
        }

        function updateSelection(id) {
            if (selectedIds.has(id)) {
                selectedIds.delete(id);
            } else {
                selectedIds.add(id);
            }
            
            document.getElementById('selectedCount').textContent = selectedIds.size;
            document.getElementById('selectAll').checked = selectedIds.size === filteredData.length;
        }

        function exportData() {
            if (selectedIds.size === 0) {
                alert('Please select at least one unit to export');
                return;
            }

            const selected = inventoryData.filter(item => selectedIds.has(item.id));
            console.log('Exporting:', selected);
            alert(`Exporting ${selected.length} units`);
        }
        let activeFilters = {};

function updateFilters() {
    const filterIds = [
        'FilterMfg', 'FilterYear', 'FilterModelType', 'FilterModelTypeStyle',
        'FilterAutoRV', 'FilterBamStore', 'FilterMapped', 'FilterNewUsed',
        'FilterFFPlan', 'FilterLot', 'FilterCommissionProgram', 'FilterAge', 'FilterSort'
    ];

    activeFilters = {};
    
    filterIds.forEach(id => {
        const element = document.getElementById(id);
        if (element && element.value) {
            const label = element.options[0].text.replace('-', '');
            activeFilters[id] = {
                value: element.value,
                text: element.options[element.selectedIndex].text,
                label: label
            };
        }
    });

    displayActiveFilters();
}

function displayActiveFilters() {
    const badgesContainer = document.getElementById('filterBadges');
    badgesContainer.innerHTML = '';

    if (Object.keys(activeFilters).length === 0) {
        badgesContainer.innerHTML = '<em class="text-muted">None</em>';
        return;
    }

    Object.keys(activeFilters).forEach(key => {
        const filter = activeFilters[key];
        const badge = document.createElement('span');
        badge.className = 'filter-badge';
        badge.innerHTML = `${filter.label}: ${filter.text} <span class="remove" onclick="removeFilter('${key}')">×</span>`;
        badgesContainer.appendChild(badge);
    });
}

function removeFilter(filterId) {
    const element = document.getElementById(filterId);
    if (element) {
        element.selectedIndex = 0;
        updateFilters();
    }
}

function applyFilters() {
    const search = document.getElementById('FilterSearch').value.toLowerCase();
    
    filteredData = inventoryData.filter(item => {
        // Search filter
        let matchesSearch = true;
        if (search) {
            // Special keywords
            if (search === 'notheory') {
                matchesSearch = !item.webLink;
            } else if (search === 'yellowtag') {
                matchesSearch = item.icons.includes('yellowtag');
            } else if (search === 'expired') {
                matchesSearch = item.icons.includes('expired');
            } else if (search === 'hot') {
                matchesSearch = item.icons.includes('hot');
            } else {
                // Regular search
                matchesSearch = 
                    item.stock.toLowerCase().includes(search) ||
                    item.model.toLowerCase().includes(search) ||
                    item.mfg.toLowerCase().includes(search) ||
                    (item.webLink && item.webLink.toLowerCase().includes(search));
            }
        }
        
        // Apply all active filters
        let matchesFilters = true;
        
        // Manufacturer filter
        if (activeFilters.FilterMfg) {
            const mfgValue = activeFilters.FilterMfg.value;
            if (mfgValue === 'Recent' || mfgValue === 'NewlyAdded' || mfgValue === 'Sold' || mfgValue === 'BelowCost' || mfgValue === 'NotDiscounted') {
                // Special filters - you can add specific logic here
                matchesFilters = matchesFilters && true;
            } else {
                matchesFilters = matchesFilters && item.mfg === mfgValue;
            }
        }
        
        // Year filter
        if (activeFilters.FilterYear) {
            matchesFilters = matchesFilters && item.year.toString() === activeFilters.FilterYear.value;
        }
        
        // Location/Status filter
        if (activeFilters.FilterLot) {
            const lotValue = activeFilters.FilterLot.value;
            if (lotValue === 'CUSTOM') {
                matchesFilters = matchesFilters && item.location === 'CUSTOM';
            } else if (lotValue === 'GHOST') {
                matchesFilters = matchesFilters && item.location === 'GHOST';
            } else if (lotValue === '-1') {
                matchesFilters = matchesFilters && item.location !== 'CUSTOM';
            } else if (lotValue === 'NOTGHOST') {
                matchesFilters = matchesFilters && item.location !== 'GHOST';
            }
        }
        
        // Map filter
        if (activeFilters.FilterMapped) {
            const isMapped = item.icons.includes('mapprotected') || item.icons.includes('mapfree');
            matchesFilters = matchesFilters && (
                (activeFilters.FilterMapped.value === 'true' && isMapped) ||
                (activeFilters.FilterMapped.value === 'false' && !isMapped)
            );
        }
        
        // New/Used filter
        if (activeFilters.FilterNewUsed) {
            const isNew = item.icons.includes('new');
            matchesFilters = matchesFilters && (
                (activeFilters.FilterNewUsed.value === '0' && isNew) ||
                (activeFilters.FilterNewUsed.value === '1' && !isNew)
            );
        }
        
        // Days filter
        if (activeFilters.FilterAge) {
            const ageValue = activeFilters.FilterAge.value;
            if (ageValue === 'lt30') {
                matchesFilters = matchesFilters && item.days < 30;
            } else if (ageValue === '30to90') {
                matchesFilters = matchesFilters && item.days >= 30 && item.days < 90;
            } else if (ageValue === '90to180') {
                matchesFilters = matchesFilters && item.days >= 90 && item.days < 180;
            } else if (ageValue === 'gt180') {
                matchesFilters = matchesFilters && item.days >= 180;
            }
        }
        
        return matchesSearch && matchesFilters;
    });
    
    // Apply sorting if selected
    if (activeFilters.FilterSort) {
        const sortValue = activeFilters.FilterSort.value;
        filteredData.sort((a, b) => {
            if (sortValue === 'Model') {
                return a.model.localeCompare(b.model);
            } else if (sortValue === 'Savings') {
                return (b.msrp - b.salePrice) - (a.msrp - a.salePrice);
            } else if (sortValue === 'GrossProfit') {
                return b.profit - a.profit;
            } else if (sortValue === 'FloorDays') {
                return b.days - a.days;
            }
            return 0;
        });
    }
    
    renderTable();
}

function clearFilters() {
    document.getElementById('FilterSearch').value = '';
    
    const selects = document.querySelectorAll('select.form-control');
    selects.forEach(select => {
        select.selectedIndex = 0;
    });
    
    activeFilters = {};
    displayActiveFilters();
    
    // Reset to original data and re-render
    filteredData = [...inventoryData];
    renderTable();
}
// Initialize
displayActiveFilters();

        document.querySelectorAll('th.sortable').forEach(th => {
            th.addEventListener('click', () => {
                const column = th.getAttribute('data-sort');
                sortTable(column);
            });
        });

        renderTable();
    </script>
</body>
</html>